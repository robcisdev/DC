<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="x-poe-datastore-behavior" content="local_only">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blauLabs Data Center Intelligence - T-Mobile Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        coresite: {
                            blue: '#0066cc',
                            orange: '#ff6600',
                            dark: '#1a1a2e',
                            darker: '#16213e',
                            panel: '#1f2937',
                            border: '#374151'
                        }
                    }
                }
            }
        };

        // Enable dark mode
        document.documentElement.classList.add('dark');
        
        // Handle theme changes
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>
    <style>
        body {
            overflow-x: hidden;
        }
        .datacenter-card {
            position: relative;
            overflow: hidden;
        }
        .datacenter-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(to top, rgba(26, 26, 46, 0.9), rgba(26, 26, 46, 0));
            z-index: 1;
            pointer-events: none;
        }
        .datacenter-status {
            position: relative;
            z-index: 2;
        }
        .nav-item {
            transition: all 0.2s ease-in-out;
        }
        .nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .view-transition {
            display: none;
        }
        .view-transition.active {
            display: block;
        }
        .stat-card {
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        /* Tree Navigation Styles */
        .tree-nav {
            width: 280px;
            background-color: #1a1a2e;
            border-right: 1px solid #374151;
            transition: width 0.3s ease;
            overflow-y: auto;
        }
        .tree-nav.collapsed {
            width: 60px;
        }
        .tree-item {
            cursor: pointer;
            user-select: none;
        }
        .tree-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        .tree-item.active {
            background-color: rgba(0, 102, 204, 0.1);
            border-left: 3px solid #0066cc;
        }
        .tree-children {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .tree-children.expanded {
            max-height: 2000px;
        }
        .zone-icon {
            color: #f59e0b;
        }
        .region-icon {
            color: #ef4444;
        }
        .facility-icon {
            color: #818cf8;
        }
        .expand-icon {
            transition: transform 0.2s ease;
        }
        .rotate-90 {
            transform: rotate(90deg);
        }
        /* Status indicators */
        .status-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: auto;
        }
        .status-operational {
            background-color: #10b981;
        }
        .status-warning {
            background-color: #f59e0b;
        }
        .status-critical {
            background-color: #ef4444;
        }
        .status-maintenance {
            background-color: #3b82f6;
        }
    </style>
</head>
<body class="bg-coresite-dark text-white font-sans">
    <div class="flex min-h-screen">
        <!-- Left Sidebar -->
        <div class="w-14 bg-coresite-darker flex flex-col items-center py-4 border-r border-coresite-border">
            <div class="mb-6">
                <div class="block hover:opacity-80 transition-opacity">
                    <div class="w-8 h-8 bg-coresite-blue rounded flex items-center justify-center">
                        <i class="fas fa-server text-white text-sm"></i>
                    </div>
                </div>
            </div>
            <div class="flex flex-col space-y-6 mt-4">
                <a href="#" class="text-white hover:text-coresite-blue">
                    <i class="fas fa-th-large text-lg"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-coresite-blue" id="observability-dashboard-toggle">
                    <i class="fas fa-chart-line text-lg"></i>
                </a>
                <a href="#" class="text-white hover:text-coresite-blue" id="toggle-tree-nav">
                    <i class="fas fa-sitemap text-lg"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-coresite-blue">
                    <i class="fas fa-server text-lg"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-coresite-blue">
                    <i class="fas fa-file-alt text-lg"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-coresite-blue relative" id="alerts-panel-toggle">
                    <i class="fas fa-bell text-lg"></i>
                    <span class="absolute -top-1 -right-1 bg-red-500 rounded-full w-4 h-4 flex items-center justify-center text-xs" id="alert-count">12</span>
                </a>
                <a href="#" class="text-gray-500 hover:text-coresite-blue" id="maintenance-dashboard-toggle">
                    <i class="fas fa-tools text-lg"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-coresite-blue">
                    <i class="fas fa-cog text-lg"></i>
                </a>
            </div>
        </div>

        <!-- Tree Navigation Panel -->
        <div class="tree-nav" id="tree-navigation">
            <div class="p-3 border-b border-coresite-border">
                <h3 class="text-lg font-semibold">Data Center Assets</h3>
                <div class="relative mt-3">
                    <input type="text" id="tree-filter" placeholder="filter" class="w-full bg-gray-800 border border-gray-700 rounded-md px-3 py-2 text-sm text-white focus:outline-none focus:ring-1 focus:ring-coresite-blue focus:border-transparent">
                    <i class="fas fa-search absolute right-3 top-2.5 text-gray-500"></i>
                </div>
            </div>
            <div id="tree-container" class="pt-2">
                <!-- Tree will be generated here -->
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col">
            <!-- Top Navigation Bar -->
            <div class="h-14 bg-coresite-darker flex items-center justify-between px-4 border-b border-coresite-border">
                <div class="flex items-center">
                    <div class="h-8 w-8 bg-coresite-blue rounded flex items-center justify-center mr-3">
                        <i class="fas fa-server text-white"></i>
                    </div>
                    <div class="ml-4 text-sm">
                        <span class="text-gray-400">Powered by</span>
                        <span class="text-coresite-blue font-semibold ml-1">DATA CENTER AI</span>
                    </div>
                </div>
                <div class="flex items-center space-x-2">
                    <div class="relative hidden md:block">
                        <input type="text" placeholder="Global Search" class="bg-coresite-panel border border-coresite-border rounded-md px-10 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-coresite-blue">
                        <i class="fas fa-search absolute left-3 top-2.5 text-gray-400"></i>
                        <span class="absolute right-3 top-2 text-xs text-gray-400">Ctrl+Shift+F</span>
                    </div>
                    <button class="p-2 rounded-full hover:bg-coresite-panel">
                        <i class="fas fa-sun"></i>
                    </button>
                    <div class="flex items-center bg-coresite-panel rounded-md px-2 py-1 border border-coresite-border">
                        <div class="w-8 h-8 rounded-full bg-coresite-orange flex items-center justify-center text-white font-bold">CS</div>
                        <span class="ml-2 hidden md:inline">DC_Admin</span>
                        <i class="fas fa-chevron-down ml-2 text-xs"></i>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class="flex-1 p-4 overflow-auto">
                <div class="flex justify-between items-center mb-4">
                    <div>
                        <h1 class="text-3xl font-bold">T-MOBILE DATA CENTER OPERATIONS</h1>
                        <p class="text-gray-400 mt-1">Real-Time Infrastructure Monitoring & Intelligence</p>
                    </div>
                    <div class="flex items-center gap-2">
                        <button class="bg-coresite-blue text-white px-4 py-2 rounded-md flex items-center">
                            WIDGETS <i class="fas fa-chevron-down ml-2"></i>
                        </button>
                        <button class="text-gray-400 px-2 py-2 hover:text-white">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <button class="text-gray-400 px-2 py-2 hover:text-white">
                            <i class="fas fa-question-circle"></i>
                        </button>
                    </div>
                </div>

                <!-- Navigation Breadcrumbs -->
                <div class="bg-coresite-panel border border-coresite-border rounded-md p-2 mb-4">
                    <div class="flex items-center text-sm" id="breadcrumb">
                        <a href="#" class="text-coresite-blue hover:underline" data-level="0">Home</a>
                    </div>
                </div>

                <!-- Content Views -->
                <div id="content-views">
                    <!-- Home View -->
                    <div id="home-view" class="view-transition active">
                        <h2 class="text-xl font-semibold mb-4">T-Mobile Data Center Regions</h2>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8" id="regions-grid">
                            <!-- Regions will be populated here -->
                        </div>

                        <!-- Global Data Center Statistics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                            <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 stat-card">
                                <div class="text-gray-400 mb-1">Total Facilities</div>
                                <div class="text-3xl font-bold">25</div>
                                <div class="text-sm text-green-500 mt-2">
                                    <i class="fas fa-arrow-up mr-1"></i> 3 new this year
                                </div>
                            </div>
                            
                            <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 stat-card">
                                <div class="text-gray-400 mb-1">Active Servers</div>
                                <div class="text-3xl font-bold">18,642</div>
                                <div class="text-sm text-green-500 mt-2">
                                    <i class="fas fa-arrow-up mr-1"></i> 99.8% uptime
                                </div>
                            </div>
                            
                            <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 stat-card">
                                <div class="text-gray-400 mb-1">Power Capacity</div>
                                <div class="text-3xl font-bold">847 MW</div>
                                <div class="text-sm text-green-500 mt-2">
                                    <i class="fas fa-arrow-up mr-1"></i> 76% utilization
                                </div>
                            </div>

                            <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 stat-card">
                                <div class="text-gray-400 mb-1">Average PUE</div>
                                <div class="text-3xl font-bold">1.24</div>
                                <div class="text-sm text-green-500 mt-2">
                                    <i class="fas fa-arrow-down mr-1"></i> 12% improvement
                                </div>
                            </div>
                        </div>

                        <!-- Key Performance Indicators -->
                        <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 mb-6">
                            <h3 class="text-lg font-semibold mb-4">Real-Time Data Center KPIs</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div class="text-center">
                                    <div class="text-gray-400 mb-2">Infrastructure Uptime</div>
                                    <div class="text-4xl font-bold text-green-500 mb-2">99.98%</div>
                                    <div class="w-full bg-gray-700 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 99.98%"></div>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-gray-400 mb-2">Network Latency</div>
                                    <div class="text-4xl font-bold text-blue-500 mb-2">2.3ms</div>
                                    <div class="w-full bg-gray-700 rounded-full h-2">
                                        <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                                    </div>
                                </div>
                                <div class="text-center">
                                    <div class="text-gray-400 mb-2">Cooling Efficiency</div>
                                    <div class="text-4xl font-bold text-yellow-500 mb-2">94.7%</div>
                                    <div class="w-full bg-gray-700 rounded-full h-2">
                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 94.7%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Region View -->
                    <div id="region-view" class="view-transition">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xl font-semibold" id="region-heading">Data Centers in North America</h2>
                            <div class="flex gap-2">
                                <button class="bg-coresite-panel border border-coresite-border rounded px-2 py-1 text-sm">
                                    <i class="fas fa-filter"></i>
                                </button>
                                <button class="bg-coresite-panel border border-coresite-border rounded px-2 py-1 text-sm">
                                    <i class="fas fa-sort-alpha-down"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6" id="facilities-grid">
                            <!-- Facilities will be populated here -->
                        </div>
                    </div>

                    <!-- Facility View -->
                    <div id="facility-view" class="view-transition">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xl font-semibold" id="facility-heading">Facility Name</h2>
                            <div class="flex gap-2">
                                <button class="bg-coresite-panel border border-coresite-border rounded px-2 py-1 text-sm">
                                    <i class="fas fa-filter"></i>
                                </button>
                                <button class="bg-coresite-panel border border-coresite-border rounded px-2 py-1 text-sm">
                                    <i class="fas fa-sort-alpha-down"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Facility Information -->
                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6">
                            <div class="lg:col-span-1 bg-coresite-panel border border-coresite-border rounded-md p-4">
                                <div class="flex items-center mb-4">
                                    <i class="fas fa-building text-3xl text-coresite-blue mr-4"></i>
                                    <div>
                                        <div class="text-sm text-gray-400">Facility Code</div>
                                        <div class="text-2xl font-bold" id="facility-code">LA1</div>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    <div>
                                        <div class="text-sm text-gray-400">Status</div>
                                        <div class="flex items-center mt-1">
                                            <span class="inline-block w-3 h-3 rounded-full bg-green-500 mr-2"></span>
                                            <span>Operational</span>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="text-sm text-gray-400">Power Usage</div>
                                        <div class="text-lg">847 kW</div>
                                    </div>
                                    <div>
                                        <div class="text-sm text-gray-400">Last Maintenance</div>
                                        <div class="text-lg">2025-01-15</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="lg:col-span-3 bg-coresite-panel border border-coresite-border rounded-md p-4">
                                <div class="flex justify-between items-start mb-4">
                                    <h3 class="text-lg font-semibold">Data Center Layout</h3>
                                    <div class="flex space-x-2">
                                        <button class="bg-coresite-darker px-3 py-1 rounded-md text-sm flex items-center">
                                            <i class="fas fa-expand-arrows-alt mr-1"></i> Zoom
                                        </button>
                                        <button class="bg-coresite-darker px-3 py-1 rounded-md text-sm flex items-center">
                                            <i class="fas fa-print mr-1"></i> Print
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="bg-black rounded-md h-48 flex items-center justify-center">
                                    <svg viewBox="0 0 800 400" width="100%" height="100%" preserveAspectRatio="xMidYMid meet">
                                        <!-- Data center floor layout -->
                                        <rect x="50" y="100" width="700" height="200" fill="none" stroke="#444" stroke-width="2"></rect>
                                        
                                        <!-- Server zones -->
                                        <rect x="100" y="120" width="150" height="80" fill="none" stroke="#0066cc" stroke-width="2"></rect>
                                        <rect x="300" y="120" width="150" height="80" fill="none" stroke="#0066cc" stroke-width="2"></rect>
                                        <rect x="500" y="120" width="150" height="80" fill="none" stroke="#0066cc" stroke-width="2"></rect>
                                        
                                        <!-- Zone markers -->
                                        <circle cx="175" cy="160" r="15" fill="#0066cc" opacity="0.7"></circle>
                                        <text x="175" y="165" text-anchor="middle" fill="white" font-size="12">Z1</text>
                                        
                                        <circle cx="375" cy="160" r="15" fill="#0066cc" opacity="0.7"></circle>
                                        <text x="375" y="165" text-anchor="middle" fill="white" font-size="12">Z2</text>
                                        
                                        <circle cx="575" cy="160" r="15" fill="#0066cc" opacity="0.7"></circle>
                                        <text x="575" y="165" text-anchor="middle" fill="white" font-size="12">Z3</text>

                                        <!-- Support areas -->
                                        <rect x="100" y="220" width="100" height="60" fill="none" stroke="#666" stroke-width="1"></rect>
                                        <text x="150" y="255" text-anchor="middle" fill="#ccc" font-size="10">PDU</text>
                                        
                                        <rect x="550" y="220" width="100" height="60" fill="none" stroke="#666" stroke-width="1"></rect>
                                        <text x="600" y="255" text-anchor="middle" fill="#ccc" font-size="10">HVAC</text>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <h3 class="text-lg font-semibold mb-3">Server Zones</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="server-zones-grid">
                            <!-- Server zones will be populated here -->
                        </div>
                    </div>

                    <!-- Server Zone View -->
                    <div id="server-zone-view" class="view-transition">
                        <div class="mb-4">
                            <div class="bg-coresite-panel border border-coresite-border rounded-md p-3 flex justify-between items-center">
                                <div class="flex items-center">
                                    <span class="font-semibold text-lg" id="server-zone-title"></span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <button class="text-gray-400 hover:text-white">
                                        <i class="fas fa-filter"></i>
                                    </button>
                                    <button class="text-gray-400 hover:text-white">
                                        <i class="fas fa-sort-alpha-down"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Zone Dashboard -->
                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-4 mb-6">
                            <!-- Zone Status -->
                            <div class="lg:col-span-1">
                                <div class="bg-coresite-panel border border-coresite-border rounded-md p-4">
                                    <div class="flex items-center justify-between mb-3">
                                        <div>
                                            <h2 class="text-lg font-semibold" id="zone-id-header">Z1</h2>
                                            <div class="text-sm text-gray-400">Utilization</div>
                                        </div>
                                        <div class="bg-green-500 rounded-full w-12 h-12 flex items-center justify-center" id="zone-icon-bg">
                                            <i class="fas fa-server text-white text-xl"></i>
                                        </div>
                                    </div>
                                    <div class="text-green-500 text-5xl font-bold mb-3" id="zone-utilization">87.4%</div>
                                    <div class="flex justify-between text-sm text-gray-400 mb-1">
                                        <span>LAST READING</span>
                                        <div>
                                            <span id="zone-date">2025/01/27</span>
                                            <span id="zone-time">15:22:12</span>
                                        </div>
                                    </div>
                                    <div class="w-full bg-coresite-darker rounded-full h-2.5 mb-2">
                                        <div class="bg-green-500 h-2.5 rounded-full" id="zone-utilization-bar" style="width: 87%"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Zone Metrics -->
                            <div class="lg:col-span-3">
                                <div class="bg-coresite-panel border border-coresite-border rounded-md p-4">
                                    <h3 class="text-lg font-semibold mb-4">Zone Performance Metrics</h3>
                                    <div class="grid grid-cols-2 md:grid-cols-6 gap-4">
                                        <div class="text-center">
                                            <div class="text-sm text-gray-400">Temperature</div>
                                            <div class="text-xl">22.4°C</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-sm text-gray-400">Humidity</div>
                                            <div class="text-xl">45%</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-sm text-gray-400">Power Draw</div>
                                            <div class="text-xl">156 kW</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-sm text-gray-400">Network Load</div>
                                            <div class="text-xl">78%</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-sm text-gray-400">Rack Count</div>
                                            <div class="text-xl">42</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-sm text-gray-400">Alerts</div>
                                            <div class="text-xl">2 <span class="text-yellow-500">⚠</span></div>
                                        </div>
                                    </div>
                                    
                                    <div class="mt-4">
                                        <div class="text-sm text-gray-400 mb-1">Power Usage Effectiveness (PUE)</div>
                                        <div class="w-full bg-coresite-darker rounded-full h-2.5">
                                            <div class="bg-coresite-blue h-2.5 rounded-full" style="width: 78%"></div>
                                        </div>
                                        <div class="flex justify-between mt-1 text-xs">
                                            <span>1.0</span>
                                            <span class="text-coresite-blue">1.23</span>
                                            <span>2.0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Asset Categories -->
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold mb-3">Critical Asset Categories</h3>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 nav-item cursor-pointer" onclick="showAssetList('Servers')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <i class="fas fa-server text-2xl text-coresite-blue mr-3"></i>
                                            <div>
                                                <div>Servers</div>
                                                <div class="text-sm text-gray-400">247 units</div>
                                                <div class="flex items-center mt-1 text-xs">
                                                    <div class="text-gray-400 mr-2">Status:</div>
                                                    <div class="flex items-center mr-2"><span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-1"></span>241</div>
                                                    <div class="flex items-center mr-2"><span class="inline-block w-2 h-2 rounded-full bg-yellow-500 mr-1"></span>4</div>
                                                    <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full bg-blue-500 mr-1"></span>2</div>
                                                </div>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-500"></i>
                                    </div>
                                </div>
                                
                                <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 nav-item cursor-pointer" onclick="showAssetList('Network Equipment')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <i class="fas fa-network-wired text-2xl text-coresite-blue mr-3"></i>
                                            <div>
                                                <div>Network Equipment</div>
                                                <div class="text-sm text-gray-400">36 units</div>
                                                <div class="flex items-center mt-1 text-xs">
                                                    <div class="text-gray-400 mr-2">Status:</div>
                                                    <div class="flex items-center mr-2"><span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-1"></span>34</div>
                                                    <div class="flex items-center mr-2"><span class="inline-block w-2 h-2 rounded-full bg-yellow-500 mr-1"></span>2</div>
                                                </div>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-500"></i>
                                    </div>
                                </div>
                                
                                <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 nav-item cursor-pointer" onclick="showAssetList('Power Systems')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <i class="fas fa-bolt text-2xl text-coresite-blue mr-3"></i>
                                            <div>
                                                <div>Power Systems</div>
                                                <div class="text-sm text-gray-400">18 units</div>
                                                <div class="flex items-center mt-1 text-xs">
                                                    <div class="text-gray-400 mr-2">Status:</div>
                                                    <div class="flex items-center mr-2"><span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-1"></span>17</div>
                                                    <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full bg-yellow-500 mr-1"></span>1</div>
                                                </div>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-500"></i>
                                    </div>
                                </div>
                                
                                <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 nav-item cursor-pointer" onclick="showAssetList('Cooling Systems')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <i class="fas fa-snowflake text-2xl text-coresite-blue mr-3"></i>
                                            <div>
                                                <div>Cooling Systems</div>
                                                <div class="text-sm text-gray-400">12 units</div>
                                                <div class="flex items-center mt-1 text-xs">
                                                    <div class="text-gray-400 mr-2">Status:</div>
                                                    <div class="flex items-center mr-2"><span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-1"></span>11</div>
                                                    <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full bg-yellow-500 mr-1"></span>1</div>
                                                </div>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-500"></i>
                                    </div>
                                </div>
                                
                                <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 nav-item cursor-pointer" onclick="showAssetList('Storage Systems')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <i class="fas fa-hdd text-2xl text-coresite-blue mr-3"></i>
                                            <div>
                                                <div>Storage Systems</div>
                                                <div class="text-sm text-gray-400">64 units</div>
                                                <div class="flex items-center mt-1 text-xs">
                                                    <div class="text-gray-400 mr-2">Status:</div>
                                                    <div class="flex items-center mr-2"><span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-1"></span>61</div>
                                                    <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full bg-yellow-500 mr-1"></span>3</div>
                                                </div>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-500"></i>
                                    </div>
                                </div>
                                
                                <div class="bg-coresite-panel border border-coresite-border rounded-md p-4 nav-item cursor-pointer" onclick="showAssetList('Environmental Systems')">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center">
                                            <i class="fas fa-thermometer-half text-2xl text-coresite-blue mr-3"></i>
                                            <div>
                                                <div>Environmental Systems</div>
                                                <div class="text-sm text-gray-400">28 units</div>
                                                <div class="flex items-center mt-1 text-xs">
                                                    <div class="text-gray-400 mr-2">Status:</div>
                                                    <div class="flex items-center mr-2"><span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-1"></span>26</div>
                                                    <div class="flex items-center"><span class="inline-block w-2 h-2 rounded-full bg-blue-500 mr-1"></span>2</div>
                                                </div>
                                            </div>
                                        </div>
                                        <i class="fas fa-chevron-right text-gray-500"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Asset List - Initially Hidden -->
                        <div id="asset-list" class="mb-6 hidden">
                            <div class="flex justify-between items-center mb-3">
                                <h3 class="text-xl font-semibold"><span id="asset-category">Category</span> Assets</h3>
                                <button class="text-sm bg-coresite-darker px-3 py-1 rounded-md" onclick="hideAssetList()">
                                    <i class="fas fa-times mr-1"></i> Close
                                </button>
                            </div>
                            
                            <div class="bg-coresite-panel border border-coresite-border rounded-md overflow-hidden">
                                <table class="min-w-full divide-y divide-coresite-border">
                                    <thead class="bg-coresite-darker">
                                        <tr>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Asset ID</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Name</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Status</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Last Check</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Performance</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-coresite-panel divide-y divide-coresite-border" id="asset-table-body">
                                        <!-- Asset rows will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Zone Visualization -->
                        <div class="bg-coresite-panel border border-coresite-border rounded-md overflow-hidden">
                            <div class="p-3 border-b border-coresite-border flex justify-between items-center">
                                <div class="font-semibold">DATA CENTER ZONE VISUALIZATION</div>
                                <div class="flex space-x-3">
                                    <div class="flex items-center text-xs">
                                        <span class="inline-block w-3 h-3 rounded-full bg-green-500 mr-1"></span>
                                        <span>Operational</span>
                                    </div>
                                    <div class="flex items-center text-xs">
                                        <span class="inline-block w-3 h-3 rounded-full bg-yellow-500 mr-1"></span>
                                        <span>Warning</span>
                                    </div>
                                    <div class="flex items-center text-xs">
                                        <span class="inline-block w-3 h-3 rounded-full bg-red-500 mr-1"></span>
                                        <span>Critical</span>
                                    </div>
                                    <div class="flex items-center text-xs">
                                        <span class="inline-block w-3 h-3 rounded-full bg-blue-500 mr-1"></span>
                                        <span>Maintenance</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Asset Category Filter -->
                            <div class="p-3 border-b border-coresite-border bg-coresite-darker">
                                <div class="flex items-center text-sm mb-1">
                                    <span class="mr-2 text-gray-400">Filter by asset type:</span>
                                </div>
                                <div class="flex flex-wrap gap-2">
                                    <button id="filter-all" class="px-3 py-1 rounded bg-coresite-blue text-white text-xs" onclick="filterMapAssets('all')">All Assets</button>
                                    <button id="filter-servers" class="px-3 py-1 rounded bg-coresite-panel text-gray-300 text-xs" onclick="filterMapAssets('Servers')">Servers</button>
                                    <button id="filter-network" class="px-3 py-1 rounded bg-coresite-panel text-gray-300 text-xs" onclick="filterMapAssets('Network Equipment')">Network</button>
                                    <button id="filter-power" class="px-3 py-1 rounded bg-coresite-panel text-gray-300 text-xs" onclick="filterMapAssets('Power Systems')">Power</button>
                                    <button id="filter-cooling" class="px-3 py-1 rounded bg-coresite-panel text-gray-300 text-xs" onclick="filterMapAssets('Cooling Systems')">Cooling</button>
                                    <button id="filter-storage" class="px-3 py-1 rounded bg-coresite-panel text-gray-300 text-xs" onclick="filterMapAssets('Storage Systems')">Storage</button>
                                    <button id="filter-environmental" class="px-3 py-1 rounded bg-coresite-panel text-gray-300 text-xs" onclick="filterMapAssets('Environmental Systems')">Environmental</button>
                                </div>
                            </div>
                            
                            <div class="p-3 bg-black relative">
                                <div class="relative bg-gray-900 rounded-lg p-4 min-h-96">
                                    <!-- Data center zone schematic -->
                                    <svg viewBox="0 0 1200 600" width="100%" height="100%" preserveAspectRatio="xMidYMid meet">
                                        <!-- Zone layout -->
                                        <rect x="50" y="250" width="1100" height="100" fill="none" stroke="#333" stroke-width="2"></rect>
                                        
                                        <!-- Power distribution -->
                                        <line x1="50" y1="300" x2="1150" y2="300" stroke="#555" stroke-width="4"></line>
                                        
                                        <!-- Rack rows -->
                                        <rect x="100" y="200" width="120" height="200" fill="none" stroke="#0066cc" stroke-width="2"></rect>
                                        <rect x="300" y="200" width="120" height="200" fill="none" stroke="#0066cc" stroke-width="2"></rect>
                                        <rect x="500" y="200" width="120" height="200" fill="none" stroke="#0066cc" stroke-width="2"></rect>
                                        <rect x="700" y="200" width="120" height="200" fill="none" stroke="#0066cc" stroke-width="2"></rect>
                                        <rect x="900" y="200" width="120" height="200" fill="none" stroke="#0066cc" stroke-width="2"></rect>
                                        
                                        <!-- Zone labels -->
                                        <text x="160" y="190" text-anchor="middle" fill="#ccc" font-size="12">Rack Row A</text>
                                        <text x="360" y="190" text-anchor="middle" fill="#ccc" font-size="12">Rack Row B</text>
                                        <text x="560" y="190" text-anchor="middle" fill="#ccc" font-size="12">Rack Row C</text>
                                        <text x="760" y="190" text-anchor="middle" fill="#ccc" font-size="12">Rack Row D</text>
                                        <text x="960" y="190" text-anchor="middle" fill="#ccc" font-size="12">Network Core</text>
                                    </svg>
                                    
                                    <!-- Server Assets -->
                                    <div class="absolute top-[45%] left-[13%] group cursor-pointer asset-dot" data-asset-type="Servers">
                                        <div class="w-4 h-4 rounded-full bg-green-500 border-2 border-white animate-pulse"></div>
                                        <div class="hidden group-hover:block absolute z-10 bg-coresite-darker border border-coresite-border rounded-md p-2 text-xs w-40 -translate-x-1/2 -translate-y-[105%] transform">
                                            <div class="font-bold">SRV-001</div>
                                            <div>Dell PowerEdge R750</div>
                                            <div class="text-green-500">Operational</div>
                                            <div>CPU: 87%, RAM: 64%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="absolute top-[35%] left-[32%] group cursor-pointer asset-dot" data-asset-type="Servers">
                                        <div class="w-4 h-4 rounded-full bg-yellow-500 border-2 border-white animate-pulse"></div>
                                        <div class="hidden group-hover:block absolute z-10 bg-coresite-darker border border-coresite-border rounded-md p-2 text-xs w-40 -translate-x-1/2 -translate-y-[105%] transform">
                                            <div class="font-bold">SRV-042</div>
                                            <div>HPE ProLiant DL380</div>
                                            <div class="text-yellow-500">Warning</div>
                                            <div>High CPU: 94%</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Network Equipment Assets -->
                                    <div class="absolute top-[40%] left-[80%] group cursor-pointer asset-dot" data-asset-type="Network Equipment">
                                        <div class="w-4 h-4 rounded-full bg-green-500 border-2 border-white animate-pulse"></div>
                                        <div class="hidden group-hover:block absolute z-10 bg-coresite-darker border border-coresite-border rounded-md p-2 text-xs w-40 -translate-x-1/2 -translate-y-[105%] transform">
                                            <div class="font-bold">NET-001</div>
                                            <div>Cisco Nexus 9000</div>
                                            <div class="text-green-500">Operational</div>
                                            <div>Throughput: 78%</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Power Systems Assets -->
                                    <div class="absolute top-[55%] left-[25%] group cursor-pointer asset-dot" data-asset-type="Power Systems">
                                        <div class="w-4 h-4 rounded-full bg-green-500 border-2 border-white animate-pulse"></div>
                                        <div class="hidden group-hover:block absolute z-10 bg-coresite-darker border border-coresite-border rounded-md p-2 text-xs w-40 -translate-x-1/2 -translate-y-[105%] transform">
                                            <div class="font-bold">PDU-001</div>
                                            <div>APC InRow PDU</div>
                                            <div class="text-green-500">Operational</div>
                                            <div>Load: 76%</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cooling Systems Assets -->
                                    <div class="absolute top-[25%] left-[50%] group cursor-pointer asset-dot" data-asset-type="Cooling Systems">
                                        <div class="w-4 h-4 rounded-full bg-blue-500 border-2 border-white animate-pulse"></div>
                                        <div class="hidden group-hover:block absolute z-10 bg-coresite-darker border border-coresite-border rounded-md p-2 text-xs w-40 -translate-x-1/2 -translate-y-[105%] transform">
                                            <div class="font-bold">HVAC-001</div>
                                            <div>Liebert CRV</div>
                                            <div class="text-blue-500">Maintenance</div>
                                            <div>Scheduled PM</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Storage Systems Assets -->
                                    <div class="absolute top-[42%] left-[47%] group cursor-pointer asset-dot" data-asset-type="Storage Systems">
                                        <div class="w-4 h-4 rounded-full bg-green-500 border-2 border-white animate-pulse"></div>
                                        <div class="hidden group-hover:block absolute z-10 bg-coresite-darker border border-coresite-border rounded-md p-2 text-xs w-40 -translate-x-1/2 -translate-y-[105%] transform">
                                            <div class="font-bold">SAN-001</div>
                                            <div>NetApp FAS8300</div>
                                            <div class="text-green-500">Operational</div>
                                            <div>Capacity: 67%</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Environmental Systems Assets -->
                                    <div class="absolute top-[15%] left-[20%] group cursor-pointer asset-dot" data-asset-type="Environmental Systems">
                                        <div class="w-4 h-4 rounded-full bg-green-500 border-2 border-white animate-pulse"></div>
                                        <div class="hidden group-hover:block absolute z-10 bg-coresite-darker border border-coresite-border rounded-md p-2 text-xs w-40 -translate-x-1/2 -translate-y-[105%] transform">
                                            <div class="font-bold">ENV-001</div>
                                            <div>Temperature Sensor</div>
                                            <div class="text-green-500">Operational</div>
                                            <div>Temp: 22.4°C</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Maintenance Dashboard Panel -->
        <div id="maintenance-dashboard" class="fixed inset-0 bg-black bg-opacity-50 z-60 hidden flex items-center justify-center">
            <div class="bg-coresite-darker border border-coresite-border rounded-lg shadow-xl max-w-7xl w-full mx-4 max-h-[95vh] overflow-y-auto">
                <div class="p-6">
                    <!-- Header -->
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="text-2xl font-bold flex items-center">
                                <i class="fas fa-tools text-coresite-blue mr-3"></i>
                                Predictive Maintenance Dashboard
                            </h2>
                            <p class="text-gray-400 mt-1">AI-Driven Maintenance Scheduling & Data Center Asset Management</p>
                        </div>
                        <button id="close-maintenance-dashboard" class="text-gray-400 hover:text-white">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>

                    <!-- Maintenance Statistics -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Scheduled Tasks</div>
                                    <div class="text-2xl font-bold" id="scheduled-count">6</div>
                                </div>
                                <div class="bg-blue-500 rounded-full w-12 h-12 flex items-center justify-center">
                                    <i class="fas fa-calendar-check text-white"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">In Progress</div>
                                    <div class="text-2xl font-bold" id="inprogress-count">3</div>
                                </div>
                                <div class="bg-yellow-500 rounded-full w-12 h-12 flex items-center justify-center">
                                    <i class="fas fa-wrench text-white"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Predictive Alerts</div>
                                    <div class="text-2xl font-bold" id="predictive-alerts-count">4</div>
                                </div>
                                <div class="bg-orange-500 rounded-full w-12 h-12 flex items-center justify-center">
                                    <i class="fas fa-brain text-white"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Completed Today</div>
                                    <div class="text-2xl font-bold" id="completed-count">2</div>
                                </div>
                                <div class="bg-green-500 rounded-full w-12 h-12 flex items-center justify-center">
                                    <i class="fas fa-check-circle text-white"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Filter and Actions -->
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center space-x-3">
                            <h3 class="text-lg font-semibold">Maintenance Schedule</h3>
                            <div class="flex space-x-2">
                                <button class="maintenance-filter-btn active bg-coresite-blue text-white px-3 py-1 rounded text-sm" data-status="all">
                                    All
                                </button>
                                <button class="maintenance-filter-btn bg-coresite-panel text-gray-300 px-3 py-1 rounded text-sm" data-status="scheduled">
                                    Scheduled
                                </button>
                                <button class="maintenance-filter-btn bg-coresite-panel text-gray-300 px-3 py-1 rounded text-sm" data-status="in-progress">
                                    In Progress
                                </button>
                                <button class="maintenance-filter-btn bg-coresite-panel text-gray-300 px-3 py-1 rounded text-sm" data-status="predictive">
                                    Predictive
                                </button>
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button id="schedule-maintenance-btn" class="bg-coresite-blue hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm">
                                <i class="fas fa-plus mr-2"></i>Schedule Maintenance
                            </button>
                            <button class="bg-coresite-panel hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm">
                                <i class="fas fa-download mr-2"></i>Export
                            </button>
                        </div>
                    </div>

                    <!-- Maintenance Table -->
                    <div class="bg-coresite-panel border border-coresite-border rounded-lg overflow-hidden">
                        <table class="min-w-full divide-y divide-coresite-border">
                            <thead class="bg-coresite-darker">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Work Order
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Asset
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Facility / Location
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Type
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Priority
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Scheduled Date
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Status
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Technician
                                    </th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                        Actions
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="bg-coresite-panel divide-y divide-coresite-border" id="maintenance-table-body">
                                <!-- Maintenance rows will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schedule Maintenance Modal -->
        <div id="schedule-maintenance-modal" class="fixed inset-0 bg-black bg-opacity-50 z-70 hidden flex items-center justify-center">
            <div class="bg-coresite-darker border border-coresite-border rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-semibold">Schedule New Maintenance</h3>
                        <button id="close-schedule-modal" class="text-gray-400 hover:text-white">
                            <i class="fas fa-times text-lg"></i>
                        </button>
                    </div>
                    
                    <form id="schedule-maintenance-form" class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-400 mb-2">Asset ID</label>
                                <select id="asset-select" class="w-full bg-coresite-panel border border-coresite-border rounded-md px-3 py-2 text-white focus:outline-none focus:ring-1 focus:ring-coresite-blue">
                                    <option value="">Select Asset</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-400 mb-2">Maintenance Type</label>
                                <select id="maintenance-type" class="w-full bg-coresite-panel border border-coresite-border rounded-md px-3 py-2 text-white focus:outline-none focus:ring-1 focus:ring-coresite-blue">
                                    <option value="preventive">Preventive</option>
                                    <option value="corrective">Corrective</option>
                                    <option value="predictive">Predictive</option>
                                    <option value="emergency">Emergency</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-400 mb-2">Priority</label>
                                <select id="priority-select" class="w-full bg-coresite-panel border border-coresite-border rounded-md px-3 py-2 text-white focus:outline-none focus:ring-1 focus:ring-coresite-blue">
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                    <option value="critical">Critical</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-400 mb-2">Scheduled Date</label>
                                <input type="datetime-local" id="scheduled-date" class="w-full bg-coresite-panel border border-coresite-border rounded-md px-3 py-2 text-white focus:outline-none focus:ring-1 focus:ring-coresite-blue">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-2">Technician</label>
                            <select id="technician-select" class="w-full bg-coresite-panel border border-coresite-border rounded-md px-3 py-2 text-white focus:outline-none focus:ring-1 focus:ring-coresite-blue">
                                <option value="mike.rodriguez">Mike Rodriguez (Senior DC Technician)</option>
                                <option value="sarah.kim">Sarah Kim (Network Specialist)</option>
                                <option value="david.chang">David Chang (Power Systems Expert)</option>
                                <option value="lisa.garcia">Lisa Garcia (HVAC Specialist)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-2">Description</label>
                            <textarea id="maintenance-description" rows="3" class="w-full bg-coresite-panel border border-coresite-border rounded-md px-3 py-2 text-white focus:outline-none focus:ring-1 focus:ring-coresite-blue" placeholder="Describe the maintenance task..."></textarea>
                        </div>
                        
                        <div class="flex justify-end space-x-3 pt-4">
                            <button type="button" id="cancel-schedule" class="bg-coresite-panel hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm">
                                Cancel
                            </button>
                            <button type="submit" class="bg-coresite-blue hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm">
                                Schedule Maintenance
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Alerts Panel -->
        <div id="alerts-panel" class="fixed top-0 right-0 h-full w-96 bg-coresite-darker border-l border-coresite-border transform translate-x-full transition-transform duration-300 ease-in-out z-50 shadow-xl">
            <div class="h-full flex flex-col">
                <!-- Header -->
                <div class="p-4 border-b border-coresite-border">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold">Real-Time Alerts</h3>
                        <button id="close-alerts-panel" class="text-gray-400 hover:text-white">
                            <i class="fas fa-times text-lg"></i>
                        </button>
                    </div>
                    <div class="flex items-center mt-2 text-sm text-gray-400">
                        <i class="fas fa-brain mr-2 text-coresite-blue"></i>
                        <span>Powered by blauLabs AI Predictive Analytics</span>
                    </div>
                </div>

                <!-- Alert Categories -->
                <div class="p-4 border-b border-coresite-border">
                    <div class="flex space-x-2">
                        <button class="alert-filter-btn active bg-coresite-blue text-white px-3 py-1 rounded text-sm" data-type="all">
                            All <span class="ml-1 bg-white/20 px-1.5 py-0.5 rounded-full text-xs" id="all-count">12</span>
                        </button>
                        <button class="alert-filter-btn bg-coresite-panel text-gray-300 px-3 py-1 rounded text-sm" data-type="critical">
                            Critical <span class="ml-1 bg-red-500 text-white px-1.5 py-0.5 rounded-full text-xs" id="critical-count">4</span>
                        </button>
                        <button class="alert-filter-btn bg-coresite-panel text-gray-300 px-3 py-1 rounded text-sm" data-type="predictive">
                            Predictive <span class="ml-1 bg-orange-500 text-white px-1.5 py-0.5 rounded-full text-xs" id="predictive-count">3</span>
                        </button>
                        <button class="alert-filter-btn bg-coresite-panel text-gray-300 px-3 py-1 rounded text-sm" data-type="servicenow">
                            ServiceNow <span class="ml-1 bg-blue-500 text-white px-1.5 py-0.5 rounded-full text-xs" id="servicenow-count">5</span>
                        </button>
                    </div>
                </div>

                <!-- Alerts List -->
                <div class="flex-1 overflow-y-auto" id="alerts-container">
                    <!-- Alerts will be populated here -->
                </div>
            </div>
        </div>

        <!-- Overlay for alerts panel -->
        <div id="alerts-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

        <!-- Observability Dashboard -->
        <div id="observability-dashboard" class="fixed inset-0 bg-black bg-opacity-50 z-60 hidden flex items-center justify-center">
            <div class="bg-coresite-darker border border-coresite-border rounded-lg shadow-xl w-full h-full m-4 overflow-y-auto">
                <div class="p-6 h-full flex flex-col">
                    <!-- Header -->
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h2 class="text-3xl font-bold flex items-center">
                                <i class="fas fa-chart-line text-coresite-blue mr-3"></i>
                                Data Center Health Observatory
                            </h2>
                            <p class="text-gray-400 mt-1">Real-Time Infrastructure Intelligence & Performance Analytics</p>
                        </div>
                        <button id="close-observability-dashboard" class="text-gray-400 hover:text-white">
                            <i class="fas fa-times text-2xl"></i>
                        </button>
                    </div>

                    <!-- Real-time Status Bar -->
                    <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4 mb-6">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-6">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 rounded-full bg-green-500 animate-pulse mr-2"></div>
                                    <span class="text-sm text-gray-300">System Status: All Systems Operational</span>
                                </div>
                                <div class="text-sm text-gray-400">
                                    Last Updated: <span id="last-updated" class="text-white">--:--:--</span>
                                </div>
                                <div class="text-sm text-gray-400">
                                    Data Latency: <span class="text-green-500">18ms</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <button class="px-3 py-1 bg-coresite-blue hover:bg-blue-700 text-white rounded-md text-sm">
                                    <i class="fas fa-play mr-1"></i> Auto-Refresh
                                </button>
                                <button class="px-3 py-1 bg-coresite-panel hover:bg-gray-600 text-white rounded-md text-sm">
                                    <i class="fas fa-download mr-1"></i> Export
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- KPI Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 mb-6">
                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Infrastructure Health</div>
                                    <div class="text-3xl font-bold text-green-500" id="overall-health">98.7%</div>
                                    <div class="text-xs text-green-500 mt-1">
                                        <i class="fas fa-arrow-up mr-1"></i>
                                        <span id="health-trend">+1.2% vs last month</span>
                                    </div>
                                </div>
                                <div class="text-green-500">
                                    <i class="fas fa-heartbeat text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Average Uptime</div>
                                    <div class="text-3xl font-bold text-blue-500" id="overall-uptime">99.97%</div>
                                    <div class="text-xs text-blue-500 mt-1">
                                        <i class="fas fa-arrow-up mr-1"></i>
                                        <span id="uptime-trend">+0.03% vs last month</span>
                                    </div>
                                </div>
                                <div class="text-blue-500">
                                    <i class="fas fa-clock text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Power Efficiency</div>
                                    <div class="text-3xl font-bold text-purple-500" id="power-efficiency">1.24</div>
                                    <div class="text-xs text-purple-500 mt-1">
                                        <i class="fas fa-arrow-down mr-1"></i>
                                        <span id="pue-trend">-0.08 PUE improvement</span>
                                    </div>
                                </div>
                                <div class="text-purple-500">
                                    <i class="fas fa-bolt text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Cost Savings</div>
                                    <div class="text-2xl font-bold text-green-500" id="cost-savings">$1.8M</div>
                                    <div class="text-xs text-green-500 mt-1">
                                        <i class="fas fa-arrow-up mr-1"></i>
                                        <span id="savings-trend">+22% this quarter</span>
                                    </div>
                                </div>
                                <div class="text-green-500">
                                    <i class="fas fa-dollar-sign text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Carbon Reduction</div>
                                    <div class="text-2xl font-bold text-yellow-500" id="carbon-reduction">18.4%</div>
                                    <div class="text-xs text-yellow-500 mt-1">
                                        <i class="fas fa-arrow-down mr-1"></i>
                                        <span id="carbon-trend">vs industry average</span>
                                    </div>
                                </div>
                                <div class="text-yellow-500">
                                    <i class="fas fa-leaf text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-gray-400 text-sm">Critical Alerts</div>
                                    <div class="text-3xl font-bold text-red-500" id="critical-alerts-count">4</div>
                                    <div class="text-xs text-red-500 mt-1">
                                        <i class="fas fa-arrow-down mr-1"></i>
                                        <span id="alerts-trend">-60% vs last week</span>
                                    </div>
                                </div>
                                <div class="text-red-500">
                                    <i class="fas fa-exclamation-triangle text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Business Impact Metrics -->
                    <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4 mb-6">
                        <h3 class="text-lg font-semibold mb-4">Business Impact & ROI Analytics</h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                            <div class="text-center">
                                <div class="bg-green-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-3">
                                    <i class="fas fa-dollar-sign text-white text-2xl"></i>
                                </div>
                                <div class="text-gray-400 mb-2">Downtime Avoidance</div>
                                <div class="text-3xl font-bold text-green-500" id="downtime-avoidance">$12.4M</div>
                                <div class="text-sm text-gray-400 mt-1">YTD through predictive monitoring</div>
                            </div>

                            <div class="text-center">
                                <div class="bg-blue-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-3">
                                    <i class="fas fa-clock text-white text-2xl"></i>
                                </div>
                                <div class="text-gray-400 mb-2">Response Time</div>
                                <div class="text-3xl font-bold text-blue-500" id="response-time">4.2min</div>
                                <div class="text-sm text-gray-400 mt-1">Average incident response</div>
                            </div>

                            <div class="text-center">
                                <div class="bg-purple-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-3">
                                    <i class="fas fa-chart-line text-white text-2xl"></i>
                                </div>
                                <div class="text-gray-400 mb-2">Capacity Optimization</div>
                                <div class="text-3xl font-bold text-purple-500" id="capacity-optimization">+23.7%</div>
                                <div class="text-sm text-gray-400 mt-1">Utilization improvement</div>
                            </div>

                            <div class="text-center">
                                <div class="bg-orange-500 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-3">
                                    <i class="fas fa-shield-alt text-white text-2xl"></i>
                                </div>
                                <div class="text-gray-400 mb-2">Security Incidents</div>
                                <div class="text-3xl font-bold text-orange-500" id="security-incidents">-76%</div>
                                <div class="text-sm text-gray-400 mt-1">Reduction through AI monitoring</div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Dashboard Content -->
                    <div class="flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Left Column: Performance Trends -->
                        <div class="lg:col-span-2 space-y-6">
                            <!-- Asset Performance Trends -->
                            <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-lg font-semibold">Infrastructure Performance Trends</h3>
                                    <div class="flex space-x-2">
                                        <button class="trend-period-btn active px-3 py-1 bg-coresite-blue text-white rounded text-sm" data-period="7d">7D</button>
                                        <button class="trend-period-btn px-3 py-1 bg-coresite-panel text-gray-300 rounded text-sm" data-period="30d">30D</button>
                                        <button class="trend-period-btn px-3 py-1 bg-coresite-panel text-gray-300 rounded text-sm" data-period="90d">90D</button>
                                        <button class="trend-period-btn px-3 py-1 bg-coresite-panel text-gray-300 rounded text-sm" data-period="1y">1Y</button>
                                    </div>
                                </div>
                                <div class="h-64 relative">
                                    <canvas id="performance-trend-chart" class="w-full h-full"></canvas>
                                </div>
                            </div>

                            <!-- Asset Category Performance -->
                            <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                                <h3 class="text-lg font-semibold mb-4">Performance by Asset Category</h3>
                                <div class="space-y-4">
                                    <div class="asset-category-performance" data-category="Servers">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <i class="fas fa-server text-coresite-blue mr-3"></i>
                                                <span class="font-medium">Servers</span>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-lg font-bold" id="servers-performance">97.8%</div>
                                                <div class="text-xs text-green-500">+0.8%</div>
                                            </div>
                                        </div>
                                        <div class="w-full bg-coresite-darker rounded-full h-2">
                                            <div class="bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-300" style="width: 97.8%"></div>
                                        </div>
                                    </div>

                                    <div class="asset-category-performance" data-category="Network Equipment">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <i class="fas fa-network-wired text-coresite-blue mr-3"></i>
                                                <span class="font-medium">Network Equipment</span>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-lg font-bold" id="network-performance">95.2%</div>
                                                <div class="text-xs text-green-500">+1.4%</div>
                                            </div>
                                        </div>
                                        <div class="w-full bg-coresite-darker rounded-full h-2">
                                            <div class="bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-300" style="width: 95.2%"></div>
                                        </div>
                                    </div>

                                    <div class="asset-category-performance" data-category="Power Systems">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <i class="fas fa-bolt text-coresite-blue mr-3"></i>
                                                <span class="font-medium">Power Systems</span>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-lg font-bold" id="power-performance">99.1%</div>
                                                <div class="text-xs text-green-500">+0.3%</div>
                                            </div>
                                        </div>
                                        <div class="w-full bg-coresite-darker rounded-full h-2">
                                            <div class="bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-300" style="width: 99.1%"></div>
                                        </div>
                                    </div>

                                    <div class="asset-category-performance" data-category="Cooling Systems">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <i class="fas fa-snowflake text-coresite-blue mr-3"></i>
                                                <span class="font-medium">Cooling Systems</span>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-lg font-bold" id="cooling-performance">94.7%</div>
                                                <div class="text-xs text-yellow-500">-0.2%</div>
                                            </div>
                                        </div>
                                        <div class="w-full bg-coresite-darker rounded-full h-2">
                                            <div class="bg-gradient-to-r from-yellow-500 to-yellow-400 h-2 rounded-full transition-all duration-300" style="width: 94.7%"></div>
                                        </div>
                                    </div>

                                    <div class="asset-category-performance" data-category="Storage Systems">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <i class="fas fa-hdd text-coresite-blue mr-3"></i>
                                                <span class="font-medium">Storage Systems</span>
                                            </div>
                                            <div class="text-right">
                                                <div class="text-lg font-bold" id="storage-performance">96.4%</div>
                                                <div class="text-xs text-green-500">+2.1%</div>
                                            </div>
                                        </div>
                                        <div class="w-full bg-coresite-darker rounded-full h-2">
                                            <div class="bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-300" style="width: 96.4%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column: Regional Overview & Critical Assets -->
                        <div class="space-y-6">
                            <!-- Regional Performance -->
                            <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                                <h3 class="text-lg font-semibold mb-4">Regional Performance</h3>
                                <div class="space-y-4">
                                    <div class="regional-performance" data-region="North America">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <div class="w-4 h-4 rounded-full bg-green-500 mr-3"></div>
                                                <span class="font-medium">North America</span>
                                            </div>
                                            <div class="text-lg font-bold text-green-500">98.4%</div>
                                        </div>
                                        <div class="text-xs text-gray-400 mb-1">8 facilities • 247 racks</div>
                                        <div class="w-full bg-coresite-darker rounded-full h-1.5">
                                            <div class="bg-green-500 h-1.5 rounded-full" style="width: 98.4%"></div>
                                        </div>
                                    </div>

                                    <div class="regional-performance" data-region="Europe">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <div class="w-4 h-4 rounded-full bg-blue-500 mr-3"></div>
                                                <span class="font-medium">Europe</span>
                                            </div>
                                            <div class="text-lg font-bold text-blue-500">97.9%</div>
                                        </div>
                                        <div class="text-xs text-gray-400 mb-1">5 facilities • 189 racks</div>
                                        <div class="w-full bg-coresite-darker rounded-full h-1.5">
                                            <div class="bg-blue-500 h-1.5 rounded-full" style="width: 97.9%"></div>
                                        </div>
                                    </div>

                                    <div class="regional-performance" data-region="Asia Pacific">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <div class="w-4 h-4 rounded-full bg-purple-500 mr-3"></div>
                                                <span class="font-medium">Asia Pacific</span>
                                            </div>
                                            <div class="text-lg font-bold text-purple-500">99.1%</div>
                                        </div>
                                        <div class="text-xs text-gray-400 mb-1">7 facilities • 312 racks</div>
                                        <div class="w-full bg-coresite-darker rounded-full h-1.5">
                                            <div class="bg-purple-500 h-1.5 rounded-full" style="width: 99.1%"></div>
                                        </div>
                                    </div>

                                    <div class="regional-performance" data-region="Latin America">
                                        <div class="flex items-center justify-between mb-2">
                                            <div class="flex items-center">
                                                <div class="w-4 h-4 rounded-full bg-orange-500 mr-3"></div>
                                                <span class="font-medium">Latin America</span>
                                            </div>
                                            <div class="text-lg font-bold text-orange-500">96.7%</div>
                                        </div>
                                        <div class="text-xs text-gray-400 mb-1">5 facilities • 156 racks</div>
                                        <div class="w-full bg-coresite-darker rounded-full h-1.5">
                                            <div class="bg-orange-500 h-1.5 rounded-full" style="width: 96.7%"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Critical Assets Requiring Attention -->
                            <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                                <h3 class="text-lg font-semibold mb-4">Critical Assets Requiring Attention</h3>
                                <div class="space-y-3" id="critical-assets-list">
                                    <!-- Critical assets will be populated here -->
                                </div>
                            </div>

                            <!-- Key Metrics Summary -->
                            <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4">
                                <h3 class="text-lg font-semibold mb-4">Key Metrics Summary</h3>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400">MTBF (Mean Time Between Failures)</span>
                                        <span class="font-bold" id="mtbf">1,247 hrs</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400">MTTR (Mean Time To Repair)</span>
                                        <span class="font-bold" id="mttr">1.8 hrs</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400">PUE (Power Usage Effectiveness)</span>
                                        <span class="font-bold text-green-500" id="pue">1.24</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400">Cooling Efficiency</span>
                                        <span class="font-bold text-blue-500" id="cooling-efficiency">94.7%</span>
                                    </div>
                                    <div class="flex justify-between items-center">
                                        <span class="text-gray-400">Predictive Accuracy</span>
                                        <span class="font-bold text-purple-500" id="predictive-accuracy">94.8%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ServiceNow Ticket Modal -->
        <div id="servicenow-modal" class="fixed inset-0 bg-black bg-opacity-50 z-60 hidden flex items-center justify-center">
            <div class="bg-coresite-darker border border-coresite-border rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-xl font-semibold flex items-center">
                            <i class="fas fa-ticket-alt text-blue-500 mr-2"></i>
                            ServiceNow Ticket Created
                        </h3>
                        <button id="close-servicenow-modal" class="text-gray-400 hover:text-white">
                            <i class="fas fa-times text-lg"></i>
                        </button>
                    </div>
                    
                    <div id="servicenow-ticket-content">
                        <!-- Ticket content will be populated here -->
                    </div>
                    
                    <div class="flex items-center justify-between mt-6 pt-4 border-t border-coresite-border">
                        <div class="flex items-center text-sm text-gray-400">
                            <i class="fas fa-check-circle text-green-500 mr-2"></i>
                            <span>Automatically generated by blauLabs AI</span>
                        </div>
                        <div class="flex space-x-3">
                            <button id="view-in-servicenow" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm">
                                <i class="fas fa-external-link-alt mr-2"></i>View in ServiceNow
                            </button>
                            <button id="close-servicenow-modal-btn" class="bg-coresite-panel hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Fixed Footer Legend -->
    <div class="fixed bottom-0 left-0 right-0 bg-coresite-darker border-t border-coresite-border px-4 py-2 z-50">
        <div class="text-center text-xs text-gray-400">
            © 2025 T-Mobile Data Centers. All rights reserved. Confidential. | Designed by Roberto Cisneros - Powered by blauLabs AI
        </div>
    </div>

    <script>
        // Navigation state
        let currentLevel = 0;
        let navigationPath = [
            { name: 'Home', level: 0 }
        ];
        
        // CoreSite data center data
        const regions = ['North America', 'Europe', 'Asia Pacific', 'Latin America'];
        
        const facilities = {
            'North America': [
                { code: 'LA1', name: 'T-Mobile Los Angeles', location: 'Los Angeles, CA', zones: 6 },
                { code: 'NY1', name: 'T-Mobile New York', location: 'New York, NY', zones: 8 },
                { code: 'CH1', name: 'T-Mobile Chicago', location: 'Chicago, IL', zones: 4 },
                { code: 'DEN1', name: 'T-Mobile Denver', location: 'Denver, CO', zones: 3 },
                { code: 'DC1', name: 'T-Mobile Washington DC', location: 'Reston, VA', zones: 7 },
                { code: 'MIA1', name: 'T-Mobile Miami', location: 'Miami, FL', zones: 5 },
                { code: 'PHX1', name: 'T-Mobile Phoenix', location: 'Phoenix, AZ', zones: 4 },
                { code: 'SV1', name: 'T-Mobile Silicon Valley', location: 'Santa Clara, CA', zones: 9 }
            ],
            'Europe': [
                { code: 'LON1', name: 'T-Mobile London', location: 'London, UK', zones: 6 },
                { code: 'AMS1', name: 'T-Mobile Amsterdam', location: 'Amsterdam, NL', zones: 5 },
                { code: 'FRA1', name: 'T-Mobile Frankfurt', location: 'Frankfurt, DE', zones: 7 },
                { code: 'PAR1', name: 'T-Mobile Paris', location: 'Paris, FR', zones: 4 },
                { code: 'MAD1', name: 'T-Mobile Madrid', location: 'Madrid, ES', zones: 3 }
            ],
            'Asia Pacific': [
                { code: 'TOK1', name: 'T-Mobile Tokyo', location: 'Tokyo, JP', zones: 8 },
                { code: 'SIN1', name: 'T-Mobile Singapore', location: 'Singapore, SG', zones: 6 },
                { code: 'SYD1', name: 'T-Mobile Sydney', location: 'Sydney, AU', zones: 5 },
                { code: 'HKG1', name: 'T-Mobile Hong Kong', location: 'Hong Kong, HK', zones: 7 },
                { code: 'SEL1', name: 'T-Mobile Seoul', location: 'Seoul, KR', zones: 4 },
                { code: 'MUM1', name: 'T-Mobile Mumbai', location: 'Mumbai, IN', zones: 6 },
                { code: 'BKK1', name: 'T-Mobile Bangkok', location: 'Bangkok, TH', zones: 3 }
            ],
            'Latin America': [
                { code: 'SAO1', name: 'T-Mobile São Paulo', location: 'São Paulo, BR', zones: 6 },
                { code: 'MEX1', name: 'T-Mobile Mexico City', location: 'Mexico City, MX', zones: 4 },
                { code: 'BUE1', name: 'T-Mobile Buenos Aires', location: 'Buenos Aires, AR', zones: 3 },
                { code: 'LIM1', name: 'T-Mobile Lima', location: 'Lima, PE', zones: 2 },
                { code: 'SCL1', name: 'T-Mobile Santiago', location: 'Santiago, CL', zones: 3 }
            ]
        };
        
        const serverZones = {
            'LA1': [
                { id: 'Z1', name: 'Server Zone Alpha', utilization: 87.4, status: 'Operational' },
                { id: 'Z2', name: 'Server Zone Beta', utilization: 92.1, status: 'Operational' },
                { id: 'Z3', name: 'Server Zone Gamma', utilization: 76.8, status: 'Warning' },
                { id: 'Z4', name: 'Network Core Zone', utilization: 95.2, status: 'Operational' },
                { id: 'Z5', name: 'Storage Zone', utilization: 68.9, status: 'Operational' },
                { id: 'Z6', name: 'Disaster Recovery Zone', utilization: 45.3, status: 'Standby' }
            ]
        };
        
        // Initialize other facility zones with default data
        Object.keys(facilities).forEach(region => {
            facilities[region].forEach(facility => {
                if (!serverZones[facility.code]) {
                    serverZones[facility.code] = [];
                    for (let i = 1; i <= facility.zones; i++) {
                        const utilization = 60 + Math.floor(Math.random() * 35);
                        let status = 'Operational';
                        if (utilization > 95) status = 'Critical';
                        else if (utilization > 85) status = 'Warning';
                        else if (utilization < 30) status = 'Standby';
                        
                        serverZones[facility.code].push({
                            id: `Z${i}`,
                            name: `Server Zone ${String.fromCharCode(64 + i)}`,
                            utilization: utilization,
                            status: status
                        });
                    }
                }
            });
        });

        // Initialize alert data variable
        let alertData = {};

        // Generate consistent alert data based on zone statuses
        function generateAlertData() {
            alertData = {};
            
            Object.keys(facilities).forEach(region => {
                facilities[region].forEach(facility => {
                    const facilityZones = serverZones[facility.code] || [];
                    facilityZones.forEach(zone => {
                        const zoneKey = `${facility.code}-${zone.id}`;
                        let alerts = { critical: 0, warning: 0, info: 0 };
                        
                        // Generate alerts based on status
                        if (zone.status === 'Critical') {
                            alerts.critical = 1 + Math.floor(Math.random() * 3); // 1-3 critical alerts
                            alerts.warning = Math.floor(Math.random() * 2); // 0-1 warning alerts
                        } else if (zone.status === 'Warning') {
                            alerts.warning = 1 + Math.floor(Math.random() * 3); // 1-3 warning alerts
                            alerts.info = Math.floor(Math.random() * 2); // 0-1 info alerts
                        } else {
                            // Operational zones might still have some info alerts
                            alerts.info = Math.floor(Math.random() * 2); // 0-1 info alerts
                        }
                        
                        alertData[zoneKey] = alerts;
                    });
                });
            });
        }

        // Generate the alert data
        generateAlertData();

        // Function to calculate total alerts for a given hierarchy level
        function calculateAlerts(itemId, level) {
            let totalAlerts = { critical: 0, warning: 0, info: 0 };
            
            if (level === 'region') {
                // Sum alerts from all facilities in region
                const regionFacilities = facilities[itemId] || [];
                regionFacilities.forEach(facility => {
                    const facilityAlerts = calculateAlerts(facility.code, 'facility');
                    totalAlerts.critical += facilityAlerts.critical;
                    totalAlerts.warning += facilityAlerts.warning;
                    totalAlerts.info += facilityAlerts.info;
                });
            } else if (level === 'facility') {
                // Sum alerts from all zones in facility
                const facilityZones = serverZones[itemId] || [];
                facilityZones.forEach(zone => {
                    const zoneAlerts = alertData[`${itemId}-${zone.id}`] || { critical: 0, warning: 0, info: 0 };
                    totalAlerts.critical += zoneAlerts.critical;
                    totalAlerts.warning += zoneAlerts.warning;
                    totalAlerts.info += zoneAlerts.info;
                });
            } else if (level === 'zone') {
                // Return alerts for specific zone
                totalAlerts = alertData[itemId] || { critical: 0, warning: 0, info: 0 };
            }
            
            return totalAlerts;
        }

        // Data center assets sample data by category
        const assets = {
            'Servers': [
                { id: 'SRV-001', name: 'Dell PowerEdge R750', status: 'Operational', lastCheck: '2025-01-27', performance: 97.8 },
                { id: 'SRV-042', name: 'HPE ProLiant DL380', status: 'Warning', lastCheck: '2025-01-27', performance: 78.4 },
                { id: 'SRV-089', name: 'Dell PowerEdge R7515', status: 'Operational', lastCheck: '2025-01-26', performance: 94.2 },
                { id: 'SRV-124', name: 'HPE ProLiant DL360', status: 'Maintenance', lastCheck: '2025-01-25', performance: 67.1 },
                { id: 'SRV-156', name: 'Cisco UCS C240 M5', status: 'Operational', lastCheck: '2025-01-27', performance: 91.6 }
            ],
            'Network Equipment': [
                { id: 'NET-001', name: 'Cisco Nexus 9000', status: 'Operational', lastCheck: '2025-01-27', performance: 96.4 },
                { id: 'NET-007', name: 'Juniper QFX5200', status: 'Operational', lastCheck: '2025-01-26', performance: 94.8 },
                { id: 'NET-012', name: 'Arista 7280R3', status: 'Warning', lastCheck: '2025-01-25', performance: 82.3 },
                { id: 'NET-018', name: 'Cisco ASR 9000', status: 'Operational', lastCheck: '2025-01-27', performance: 98.1 }
            ],
            'Power Systems': [
                { id: 'PDU-001', name: 'APC InRow PDU', status: 'Operational', lastCheck: '2025-01-27', performance: 97.2 },
                { id: 'UPS-001', name: 'Schneider Galaxy VX', status: 'Operational', lastCheck: '2025-01-26', performance: 95.7 },
                { id: 'PDU-007', name: 'Raritan PX3', status: 'Warning', lastCheck: '2025-01-24', performance: 84.6 },
                { id: 'UPS-003', name: 'Eaton 9PX', status: 'Operational', lastCheck: '2025-01-27', performance: 96.8 }
            ],
            'Cooling Systems': [
                { id: 'HVAC-001', name: 'Liebert CRV', status: 'Maintenance', lastCheck: '2025-01-24', performance: 87.3 },
                { id: 'HVAC-003', name: 'Stulz CyberAir 3PRO', status: 'Operational', lastCheck: '2025-01-27', performance: 93.1 },
                { id: 'HVAC-005', name: 'Emerson Liebert DSE', status: 'Operational', lastCheck: '2025-01-26', performance: 89.7 }
            ],
            'Storage Systems': [
                { id: 'SAN-001', name: 'NetApp FAS8300', status: 'Operational', lastCheck: '2025-01-27', performance: 95.4 },
                { id: 'SAN-003', name: 'Dell PowerStore', status: 'Operational', lastCheck: '2025-01-26', performance: 92.8 },
                { id: 'SAN-007', name: 'HPE Primera', status: 'Warning', lastCheck: '2025-01-25', performance: 81.2 }
            ],
            'Environmental Systems': [
                { id: 'ENV-001', name: 'Temperature Sensor', status: 'Operational', lastCheck: '2025-01-27', performance: 99.1 },
                { id: 'ENV-003', name: 'Humidity Sensor', status: 'Operational', lastCheck: '2025-01-27', performance: 97.6 },
                { id: 'ENV-005', name: 'Smoke Detection System', status: 'Operational', lastCheck: '2025-01-26', performance: 98.9 },
                { id: 'ENV-007', name: 'Water Leak Detection', status: 'Warning', lastCheck: '2025-01-24', performance: 76.4 }
            ]
        };

        // Tree data for data centers
        const treeData = [
            {
                id: 'na',
                name: 'North America',
                icon: 'fas fa-map-marker-alt region-icon',
                children: facilities['North America'].map(facility => ({
                    id: facility.code,
                    name: facility.code,
                    description: facility.name,
                    icon: 'fas fa-building facility-icon',
                    children: serverZones[facility.code] ? serverZones[facility.code].map(zone => ({
                        id: `${facility.code}-${zone.id}`,
                        name: zone.id,
                        description: zone.name,
                        icon: 'fas fa-server zone-icon',
                        status: zone.status
                    })) : []
                }))
            },
            {
                id: 'eu',
                name: 'Europe',
                icon: 'fas fa-map-marker-alt region-icon',
                children: facilities['Europe'].map(facility => ({
                    id: facility.code,
                    name: facility.code,
                    description: facility.name,
                    icon: 'fas fa-building facility-icon',
                    children: serverZones[facility.code] ? serverZones[facility.code].map(zone => ({
                        id: `${facility.code}-${zone.id}`,
                        name: zone.id,
                        description: zone.name,
                        icon: 'fas fa-server zone-icon',
                        status: zone.status
                    })) : []
                }))
            },
            {
                id: 'ap',
                name: 'Asia Pacific',
                icon: 'fas fa-map-marker-alt region-icon',
                children: facilities['Asia Pacific'].map(facility => ({
                    id: facility.code,
                    name: facility.code,
                    description: facility.name,
                    icon: 'fas fa-building facility-icon',
                    children: serverZones[facility.code] ? serverZones[facility.code].map(zone => ({
                        id: `${facility.code}-${zone.id}`,
                        name: zone.id,
                        description: zone.name,
                        icon: 'fas fa-server zone-icon',
                        status: zone.status
                    })) : []
                }))
            },
            {
                id: 'la',
                name: 'Latin America',
                icon: 'fas fa-map-marker-alt region-icon',
                children: facilities['Latin America'].map(facility => ({
                    id: facility.code,
                    name: facility.code,
                    description: facility.name,
                    icon: 'fas fa-building facility-icon',
                    children: serverZones[facility.code] ? serverZones[facility.code].map(zone => ({
                        id: `${facility.code}-${zone.id}`,
                        name: zone.id,
                        description: zone.name,
                        icon: 'fas fa-server zone-icon',
                        status: zone.status
                    })) : []
                }))
            }
        ];
        
        // Function to toggle tree navigation
        document.getElementById('toggle-tree-nav').addEventListener('click', function(e) {
            e.preventDefault();
            const treeNav = document.getElementById('tree-navigation');
            treeNav.classList.toggle('collapsed');
        });
        
        // Function to build the tree view
        function buildTreeView() {
            const treeContainer = document.getElementById('tree-container');
            treeContainer.innerHTML = '';
            
            treeData.forEach(region => {
                const regionItem = createTreeItem(region, 0);
                treeContainer.appendChild(regionItem);
            });
            
            // Set up filter functionality
            const treeFilter = document.getElementById('tree-filter');
            treeFilter.addEventListener('input', function() {
                filterTree(this.value.toLowerCase());
            });
        }
        
        // Function to create a tree item
        function createTreeItem(item, level) {
            const treeItem = document.createElement('div');
            treeItem.className = 'tree-item';
            treeItem.dataset.id = item.id;
            treeItem.dataset.level = level;
            
            // Create item content
            const itemContent = document.createElement('div');
            itemContent.className = 'flex items-center py-2 px-3';
            
            // Indentation based on level
            if (level > 0) {
                const indent = document.createElement('div');
                indent.className = 'w-' + (level * 5);
                itemContent.appendChild(indent);
            }
            
            // Add expand/collapse icon if item has children
            if (item.children && item.children.length > 0) {
                const expandIcon = document.createElement('i');
                expandIcon.className = 'fas fa-chevron-right mr-2 text-gray-500 expand-icon';
                itemContent.appendChild(expandIcon);
            } else {
                // Add placeholder for spacing if no children
                const placeholder = document.createElement('div');
                placeholder.className = 'w-4 mr-2';
                itemContent.appendChild(placeholder);
            }
            
            // Add item icon
            const icon = document.createElement('i');
            icon.className = `${item.icon} mr-2`;
            itemContent.appendChild(icon);
            
            // Add item text
            const text = document.createElement('span');
            text.textContent = item.name;
            itemContent.appendChild(text);
            
            // Add description if available
            if (item.description) {
                const description = document.createElement('span');
                description.className = 'ml-2 text-xs text-gray-400';
                description.textContent = item.description;
                itemContent.appendChild(description);
            }
            
            // Add alert counters for higher levels (regions and facilities)
            if (level === 0) {
                // Region level - show aggregated alerts
                const alerts = calculateAlerts(item.name, 'region');
                const totalAlerts = alerts.critical + alerts.warning + alerts.info;
                if (totalAlerts > 0) {
                    const alertBadge = document.createElement('div');
                    alertBadge.className = 'ml-auto flex items-center space-x-1';
                    
                    if (alerts.critical > 0) {
                        const criticalBadge = document.createElement('span');
                        criticalBadge.className = 'bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full';
                        criticalBadge.textContent = alerts.critical;
                        alertBadge.appendChild(criticalBadge);
                    }
                    
                    if (alerts.warning > 0) {
                        const warningBadge = document.createElement('span');
                        warningBadge.className = 'bg-yellow-500 text-white text-xs px-1.5 py-0.5 rounded-full';
                        warningBadge.textContent = alerts.warning;
                        alertBadge.appendChild(warningBadge);
                    }
                    
                    itemContent.appendChild(alertBadge);
                }
            } else if (level === 1) {
                // Facility level - show aggregated alerts
                const alerts = calculateAlerts(item.id, 'facility');
                const totalAlerts = alerts.critical + alerts.warning + alerts.info;
                if (totalAlerts > 0) {
                    const alertBadge = document.createElement('div');
                    alertBadge.className = 'ml-auto flex items-center space-x-1';
                    
                    if (alerts.critical > 0) {
                        const criticalBadge = document.createElement('span');
                        criticalBadge.className = 'bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full';
                        criticalBadge.textContent = alerts.critical;
                        alertBadge.appendChild(criticalBadge);
                    }
                    
                    if (alerts.warning > 0) {
                        const warningBadge = document.createElement('span');
                        warningBadge.className = 'bg-yellow-500 text-white text-xs px-1.5 py-0.5 rounded-full';
                        warningBadge.textContent = alerts.warning;
                        alertBadge.appendChild(warningBadge);
                    }
                    
                    itemContent.appendChild(alertBadge);
                }
            }

            // Add status indicator if available (for server zones)
            if (item.status) {
                const statusClass = item.status === 'Operational' ? 'status-operational' : 
                                   item.status === 'Warning' ? 'status-warning' : 
                                   item.status === 'Critical' ? 'status-critical' : 'status-maintenance';
                const status = document.createElement('span');
                status.className = `status-dot ${statusClass}`;
                itemContent.appendChild(status);
            }
            
            treeItem.appendChild(itemContent);
            
            // Create container for children
            if (item.children && item.children.length > 0) {
                const childrenContainer = document.createElement('div');
                childrenContainer.className = 'tree-children';
                
                item.children.forEach(child => {
                    const childItem = createTreeItem(child, level + 1);
                    childrenContainer.appendChild(childItem);
                });
                
                treeItem.appendChild(childrenContainer);
                
                // Add click handler to toggle expand/collapse
                itemContent.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const children = this.parentElement.querySelector('.tree-children');
                    children.classList.toggle('expanded');
                    this.querySelector('.expand-icon').classList.toggle('rotate-90');
                });
            } else {
                // Add click handler for leaf nodes to navigate
                treeItem.addEventListener('click', function(e) {
                    e.stopPropagation();
                    
                    // Reset all active items
                    document.querySelectorAll('.tree-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Set this item as active
                    this.classList.add('active');
                    
                    // Handle navigation based on level
                    const itemLevel = parseInt(this.dataset.level);
                    const itemId = this.dataset.id;
                    
                    if (itemLevel === 0) {
                        // Region level
                        const regionName = this.querySelector('span').textContent;
                        navigateTo(regionName, 1);
                    } else if (itemLevel === 1) {
                        // Facility level
                        navigateTo(itemId, 2);
                    } else if (itemLevel === 2) {
                        // Server zone level
                        const parts = itemId.split('-');
                        const facilityCode = parts[0];
                        const zoneId = parts[1];
                        
                        // First navigate to the facility
                        navigateTo(facilityCode, 2);
                        
                        // Then navigate to the server zone
                        setTimeout(() => {
                            navigateTo(zoneId, 3);
                        }, 100);
                    }
                });
            }
            
            return treeItem;
        }
        
        // Function to filter the tree
        function filterTree(query) {
            if (!query) {
                // Show all items if query is empty
                document.querySelectorAll('.tree-item').forEach(item => {
                    item.style.display = '';
                });
                return;
            }
            
            // First hide all items
            document.querySelectorAll('.tree-item').forEach(item => {
                item.style.display = 'none';
            });
            
            // Find matching items
            const matchingItems = Array.from(document.querySelectorAll('.tree-item')).filter(item => {
                const text = item.textContent.toLowerCase();
                return text.includes(query);
            });
            
            // Show matching items and their ancestors
            matchingItems.forEach(item => {
                showItemAndAncestors(item);
            });
        }
        
        // Helper function to show an item and all its ancestors
        function showItemAndAncestors(item) {
            item.style.display = '';
            
            // Expand parent container if it's a child
            const parentContainer = item.parentElement;
            if (parentContainer.classList.contains('tree-children')) {
                parentContainer.classList.add('expanded');
                
                // Rotate the expand icon
                const expandIcon = parentContainer.previousElementSibling.querySelector('.expand-icon');
                if (expandIcon) {
                    expandIcon.classList.add('rotate-90');
                }
                
                // Recursively show ancestors
                const parentItem = parentContainer.parentElement;
                if (parentItem.classList.contains('tree-item')) {
                    showItemAndAncestors(parentItem);
                }
            }
        }
        
        // Function to navigate to a specific level
        function navigateTo(itemName, level) {
            // Update navigation state
            currentLevel = level;
            
            // Clear any navigation path beyond current level
            navigationPath = navigationPath.filter(item => item.level <= level - 1);
            
            // Add new path item
            navigationPath.push({
                name: itemName,
                level: level
            });
            
            // Update breadcrumb
            updateBreadcrumb();
            
            // Show corresponding view
            showView(level);
            
            // Load data for the selected item
            loadData(itemName, level);
        }
        
        // Function to update the breadcrumb
        function updateBreadcrumb() {
            const breadcrumb = document.getElementById('breadcrumb');
            breadcrumb.innerHTML = '';
            
            navigationPath.forEach((item, index) => {
                const link = document.createElement('a');
                link.href = '#';
                link.textContent = item.name;
                link.classList.add(index === navigationPath.length - 1 ? 'text-white' : 'text-coresite-blue');
                link.classList.add('hover:underline');
                link.dataset.level = item.level;
                
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const clickedLevel = parseInt(e.target.dataset.level);
                    
                    if (clickedLevel === 0) {
                        // Reset to home view
                        currentLevel = 0;
                        navigationPath = [{ name: 'Home', level: 0 }];
                        updateBreadcrumb();
                        showView(0);
                    } else {
                        // Navigate to selected level
                        navigateTo(item.name, clickedLevel);
                    }
                });
                
                breadcrumb.appendChild(link);
                
                if (index < navigationPath.length - 1) {
                    const separator = document.createElement('span');
                    separator.textContent = ' / ';
                    separator.classList.add('mx-2', 'text-gray-500');
                    breadcrumb.appendChild(separator);
                }
            });
        }
        
        // Function to show the correct view based on level
        function showView(level) {
            // Hide all views
            document.querySelectorAll('.view-transition').forEach(view => {
                view.classList.remove('active');
            });
            
            // Show the correct view
            switch(level) {
                case 0:
                    document.getElementById('home-view').classList.add('active');
                    break;
                case 1:
                    document.getElementById('region-view').classList.add('active');
                    break;
                case 2:
                    document.getElementById('facility-view').classList.add('active');
                    break;
                case 3:
                    document.getElementById('server-zone-view').classList.add('active');
                    break;
            }
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        // Function to load data for the selected item
        function loadData(itemName, level) {
            switch(level) {
                case 1: // Facilities for a Region
                    document.getElementById('region-heading').textContent = `Data Centers in ${itemName}`;
                    populateFacilities(itemName);
                    break;
                case 2: // Server Zones for a Facility
                    let region = '';
                    for (const r in facilities) {
                        if (facilities[r].some(f => f.code === itemName)) {
                            region = r;
                            break;
                        }
                    }
                    const facility = facilities[region].find(f => f.code === itemName);
                    document.getElementById('facility-heading').textContent = `${facility.name}`;
                    document.getElementById('facility-code').textContent = facility.code;
                    populateServerZones(itemName);
                    break;
                case 3: // Assets for a Server Zone
                    // Find the right zone data
                    let facilityCode = navigationPath[navigationPath.length - 2].name;
                    const zone = serverZones[facilityCode]?.find(z => z.id === itemName);
                    if (zone) {
                        document.getElementById('server-zone-title').textContent = `${zone.name} - ${facilityCode}`;
                        document.getElementById('zone-id-header').textContent = zone.id;
                        document.getElementById('zone-utilization').textContent = `${zone.utilization.toFixed(1)}%`;
                        document.getElementById('zone-utilization-bar').style.width = `${zone.utilization}%`;
                        
                        const now = new Date();
                        document.getElementById('zone-date').textContent = `${now.getFullYear()}/${(now.getMonth() + 1).toString().padStart(2, '0')}/${now.getDate().toString().padStart(2, '0')}`;
                        document.getElementById('zone-time').textContent = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
                        
                        // Set appropriate status color
                        const utilizationElement = document.getElementById('zone-utilization');
                        const iconBg = document.getElementById('zone-icon-bg');
                        const utilizationBar = document.getElementById('zone-utilization-bar');
                        
                        if (zone.utilization >= 90) {
                            utilizationElement.className = 'text-red-500 text-5xl font-bold mb-3';
                            iconBg.className = 'bg-red-500 rounded-full w-12 h-12 flex items-center justify-center';
                            utilizationBar.className = 'bg-red-500 h-2.5 rounded-full';
                        } else if (zone.utilization >= 80) {
                            utilizationElement.className = 'text-yellow-500 text-5xl font-bold mb-3';
                            iconBg.className = 'bg-yellow-500 rounded-full w-12 h-12 flex items-center justify-center';
                            utilizationBar.className = 'bg-yellow-500 h-2.5 rounded-full';
                        } else {
                            utilizationElement.className = 'text-green-500 text-5xl font-bold mb-3';
                            iconBg.className = 'bg-green-500 rounded-full w-12 h-12 flex items-center justify-center';
                            utilizationBar.className = 'bg-green-500 h-2.5 rounded-full';
                        }
                    }
                    break;
            }
        }
        
        // Function to populate facilities for a region
        function populateFacilities(region) {
            const container = document.getElementById('facilities-grid');
            container.innerHTML = '';
            
            const regionFacilities = facilities[region] || [];
            
            regionFacilities.forEach(facility => {
                const facilityCard = document.createElement('div');
                facilityCard.className = 'bg-coresite-panel border border-coresite-border rounded-lg overflow-hidden nav-item cursor-pointer transform transition-all duration-200 hover:scale-105';
                facilityCard.onclick = () => navigateTo(facility.code, 2);
                
                // Calculate zone status counts and performance
                const facilityZones = serverZones[facility.code] || [];
                let operationalCount = 0;
                let warningCount = 0;
                let criticalCount = 0;
                let standbyCount = 0;
                let totalUtilization = 0;
                
                facilityZones.forEach(zone => {
                    totalUtilization += zone.utilization;
                    if (zone.status === 'Operational') {
                        operationalCount++;
                    } else if (zone.status === 'Warning') {
                        warningCount++;
                    } else if (zone.status === 'Critical') {
                        criticalCount++;
                    } else if (zone.status === 'Standby') {
                        standbyCount++;
                    }
                });
                
                const avgUtilization = facilityZones.length > 0 ? (totalUtilization / facilityZones.length) : 75;
                const alerts = calculateAlerts(facility.code, 'facility');
                const totalAlerts = alerts.critical + alerts.warning;
                
                // Determine overall facility status
                let facilityStatus = 'Optimal Performance';
                let statusColor = 'text-green-500';
                let statusBgColor = 'bg-green-500';
                let statusIcon = 'fas fa-check-circle';
                
                if (criticalCount > 0) {
                    facilityStatus = 'Critical Issues';
                    statusColor = 'text-red-500';
                    statusBgColor = 'bg-red-500';
                    statusIcon = 'fas fa-exclamation-circle';
                } else if (warningCount > 0 || avgUtilization > 90) {
                    facilityStatus = 'Needs Attention';
                    statusColor = 'text-yellow-500';
                    statusBgColor = 'bg-yellow-500';
                    statusIcon = 'fas fa-exclamation-triangle';
                } else if (avgUtilization < 30) {
                    facilityStatus = 'Underutilized';
                    statusColor = 'text-blue-500';
                    statusBgColor = 'bg-blue-500';
                    statusIcon = 'fas fa-info-circle';
                }
                
                // Generate mock data for additional metrics
                const powerUsage = Math.floor(500 + Math.random() * 800); // 500-1300 kW
                const pue = (1.15 + Math.random() * 0.4).toFixed(2); // 1.15-1.55 PUE
                const lastUpdate = new Date();
                const timeString = lastUpdate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                facilityCard.innerHTML = `
                    <!-- Status Header -->
                    <div class="bg-coresite-darker p-3 border-b border-coresite-border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-full ${statusBgColor} mr-2 animate-pulse"></div>
                                <span class="text-sm font-semibold ${statusColor}">${facilityStatus}</span>
                            </div>
                            <div class="flex items-center text-xs text-gray-400">
                                <i class="fas fa-clock mr-1"></i>
                                <span>${timeString}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Facility Info -->
                    <div class="p-4">
                        <div class="flex items-center justify-between mb-3">
                            <div>
                                <h3 class="text-xl font-bold text-white">${facility.code}</h3>
                                <p class="text-sm text-gray-300 font-medium">${facility.name}</p>
                                <p class="text-xs text-gray-400 mt-1">
                                    <i class="fas fa-map-marker-alt mr-1"></i>${facility.location}
                                </p>
                            </div>
                            <div class="text-right">
                                <i class="fas fa-arrow-right text-coresite-blue text-xl"></i>
                            </div>
                        </div>
                        
                        <!-- Key Metrics -->
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div class="bg-coresite-darker rounded-md p-2">
                                <div class="text-xs text-gray-400">Avg Utilization</div>
                                <div class="text-lg font-bold ${avgUtilization >= 90 ? 'text-red-500' : avgUtilization >= 80 ? 'text-yellow-500' : 'text-green-500'}">${avgUtilization.toFixed(1)}%</div>
                                <div class="w-full bg-gray-700 rounded-full h-1 mt-1">
                                    <div class="${avgUtilization >= 90 ? 'bg-red-500' : avgUtilization >= 80 ? 'bg-yellow-500' : 'bg-green-500'} h-1 rounded-full transition-all duration-300" style="width: ${avgUtilization}%"></div>
                                </div>
                            </div>
                            <div class="bg-coresite-darker rounded-md p-2">
                                <div class="text-xs text-gray-400">Power Usage</div>
                                <div class="text-lg font-bold text-blue-400">${powerUsage}</div>
                                <div class="text-xs text-gray-500">kW</div>
                            </div>
                        </div>
                        
                        <!-- Server Zones Status -->
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-300">Server Zones (${facility.zones})</span>
                                ${totalAlerts > 0 ? `<span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full">${totalAlerts} alerts</span>` : ''}
                            </div>
                            <div class="flex items-center space-x-3 text-xs">
                                ${operationalCount > 0 ? `
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-1"></span>
                                        <span class="text-green-500 font-medium">${operationalCount}</span>
                                        <span class="text-gray-400 ml-1">Operational</span>
                                    </div>
                                ` : ''}
                                ${warningCount > 0 ? `
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 rounded-full bg-yellow-500 mr-1"></span>
                                        <span class="text-yellow-500 font-medium">${warningCount}</span>
                                        <span class="text-gray-400 ml-1">Warning</span>
                                    </div>
                                ` : ''}
                                ${criticalCount > 0 ? `
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 rounded-full bg-red-500 mr-1"></span>
                                        <span class="text-red-500 font-medium">${criticalCount}</span>
                                        <span class="text-gray-400 ml-1">Critical</span>
                                    </div>
                                ` : ''}
                                ${standbyCount > 0 ? `
                                    <div class="flex items-center">
                                        <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mr-1"></span>
                                        <span class="text-blue-500 font-medium">${standbyCount}</span>
                                        <span class="text-gray-400 ml-1">Standby</span>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                        
                        <!-- Additional Metrics -->
                        <div class="grid grid-cols-3 gap-2 text-xs">
                            <div class="text-center">
                                <div class="text-gray-400">PUE</div>
                                <div class="font-bold text-purple-400">${pue}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-gray-400">Uptime</div>
                                <div class="font-bold text-green-400">${(98 + Math.random() * 2).toFixed(2)}%</div>
                            </div>
                            <div class="text-center">
                                <div class="text-gray-400">Latency</div>
                                <div class="font-bold text-cyan-400">${(1.5 + Math.random() * 2).toFixed(1)}ms</div>
                            </div>
                        </div>
                        
                        <!-- Action Indicators -->
                        <div class="mt-3 pt-3 border-t border-coresite-border">
                            <div class="flex items-center justify-between text-xs">
                                <div class="flex items-center text-gray-400">
                                    <i class="${statusIcon} mr-1"></i>
                                    <span>Last updated: ${timeString}</span>
                                </div>
                                <div class="flex items-center text-coresite-blue">
                                    <span>View Details</span>
                                    <i class="fas fa-chevron-right ml-1"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(facilityCard);
            });
        }
        
        // Function to populate server zones for a facility
        function populateServerZones(facilityCode) {
            const container = document.getElementById('server-zones-grid');
            container.innerHTML = '';
            
            const facilityServerZones = serverZones[facilityCode] || [];
            
            facilityServerZones.forEach(zone => {
                const zoneCard = document.createElement('div');
                zoneCard.className = 'bg-coresite-panel border border-coresite-border rounded-md overflow-hidden nav-item cursor-pointer';
                zoneCard.onclick = () => navigateTo(zone.id, 3);
                
                // Determine status color
                let statusColor = 'green';
                let textColor = 'text-green-500';
                if (zone.utilization >= 90) {
                    statusColor = 'red';
                    textColor = 'text-red-500';
                } else if (zone.utilization >= 80) {
                    statusColor = 'yellow';
                    textColor = 'text-yellow-500';
                }
                
                // Format date/time
                const now = new Date();
                const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;
                const dateString = `${now.getFullYear()}/${(now.getMonth() + 1).toString().padStart(2, '0')}/${now.getDate().toString().padStart(2, '0')}`;
                
                zoneCard.innerHTML = `
                    <div class="p-3 border-b border-coresite-border font-semibold flex justify-between">
                        <span>${zone.name}</span>
                        <i class="fas fa-arrow-right text-coresite-blue"></i>
                    </div>
                    <div class="p-3 relative">
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="text-xl font-semibold">${zone.id}</div>
                                <div class="text-gray-400 mt-1">Utilization</div>
                                <div class="${textColor} text-3xl font-bold mt-1">${zone.utilization.toFixed(1)}%</div>
                                <div class="text-gray-400 text-xs mt-3">LAST READING</div>
                                <div class="text-gray-200 text-xs">${dateString}</div>
                                <div class="text-gray-200 text-xs">${timeString}</div>
                            </div>
                            <div class="bg-${statusColor}-500 rounded-full w-10 h-10 flex items-center justify-center">
                                <i class="fas fa-server text-white text-lg"></i>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(zoneCard);
            });
        }
        
        // Function to show asset list for a category
        function showAssetList(category) {
            document.getElementById('asset-list').classList.remove('hidden');
            document.getElementById('asset-category').textContent = category;
            
            const tableBody = document.getElementById('asset-table-body');
            tableBody.innerHTML = '';
            
            const categoryAssets = assets[category] || [];
            
            categoryAssets.forEach(asset => {
                const row = document.createElement('tr');
                
                // Determine status badge
                let statusBadge = `<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Operational</span>`;
                if (asset.status === 'Warning') {
                    statusBadge = `<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Warning</span>`;
                } else if (asset.status === 'Maintenance') {
                    statusBadge = `<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Maintenance</span>`;
                } else if (asset.status === 'Critical') {
                    statusBadge = `<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Critical</span>`;
                } else if (asset.status === 'Standby') {
                    statusBadge = `<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">Standby</span>`;
                }
                
                // Determine performance indicator color
                let performanceColor = 'bg-green-500';
                if (asset.performance < 80) {
                    performanceColor = 'bg-yellow-500';
                } else if (asset.performance < 70) {
                    performanceColor = 'bg-red-500';
                }
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">${asset.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">${asset.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${statusBadge}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">${asset.lastCheck}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <div class="flex items-center">
                            <div class="w-full bg-coresite-darker rounded-full h-2 mr-2">
                                <div class="${performanceColor} h-2 rounded-full" style="width: ${asset.performance}%"></div>
                            </div>
                            <span>${asset.performance}%</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">
                        <button class="hover:text-white mr-3"><i class="fas fa-chart-line"></i></button>
                        <button class="hover:text-white mr-3"><i class="fas fa-history"></i></button>
                        <button class="hover:text-white"><i class="fas fa-cog"></i></button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }
        
        // Function to hide asset list
        function hideAssetList() {
            document.getElementById('asset-list').classList.add('hidden');
        }
        
        // Asset map filtering function
        function filterMapAssets(assetType) {
            // Reset all filter buttons
            document.querySelectorAll('[id^="filter-"]').forEach(button => {
                button.classList.remove('bg-coresite-blue');
                button.classList.add('bg-coresite-panel');
                button.classList.remove('text-white');
                button.classList.add('text-gray-300');
            });
            
            // Map asset types to button IDs
            const buttonIdMap = {
                'all': 'filter-all',
                'Servers': 'filter-servers',
                'Network Equipment': 'filter-network',
                'Power Systems': 'filter-power',
                'Cooling Systems': 'filter-cooling',
                'Storage Systems': 'filter-storage',
                'Environmental Systems': 'filter-environmental'
            };
            
            // Get the correct button ID
            const buttonId = buttonIdMap[assetType];
            
            // Highlight the active filter button - if it exists
            const activeButton = document.getElementById(buttonId);
            if (activeButton) {
                activeButton.classList.remove('bg-coresite-panel');
                activeButton.classList.add('bg-coresite-blue');
                activeButton.classList.remove('text-gray-300');
                activeButton.classList.add('text-white');
            }
            
            // Show/hide dots based on filter
            document.querySelectorAll('.asset-dot').forEach(dot => {
                if (assetType === 'all') {
                    dot.style.display = 'block';
                } else if (dot.dataset.assetType === assetType) {
                    dot.style.display = 'block';
                } else {
                    dot.style.display = 'none';
                }
            });
        }
        
        // Data Center Alerts System
        const realTimeAlerts = [
            {
                id: 'AL001',
                type: 'critical',
                category: 'Servers',
                assetId: 'SRV-042',
                assetName: 'HPE ProLiant DL380',
                facility: 'LA1',
                title: 'Server High CPU Temperature',
                description: 'Server SRV-042 CPU temperature exceeded 85°C. Immediate attention required to prevent thermal shutdown.',
                timestamp: new Date(Date.now() - 8 * 60 * 1000), // 8 minutes ago
                severity: 'Critical',
                status: 'Active',
                servicenowTicket: 'INC0012434',
                predictive: false,
                autoCreated: true
            },
            {
                id: 'AL002',
                type: 'predictive',
                category: 'Cooling Systems',
                assetId: 'HVAC-001',
                assetName: 'Liebert CRV',
                facility: 'LA1',
                title: 'Predicted Cooling System Failure',
                description: 'AI model predicts 91% probability of compressor failure within 48 hours based on vibration and temperature patterns.',
                timestamp: new Date(Date.now() - 25 * 60 * 1000), // 25 minutes ago
                severity: 'Warning',
                status: 'Predicted',
                confidence: 91,
                timeToFailure: '48 hours',
                predictive: true,
                autoCreated: false
            },
            {
                id: 'AL003',
                type: 'critical',
                category: 'Network Equipment',
                assetId: 'NET-012',
                assetName: 'Arista 7280R3',
                facility: 'NY1',
                title: 'Network Switch Port Failure',
                description: 'Multiple ports on network switch NET-012 have failed. Network redundancy compromised.',
                timestamp: new Date(Date.now() - 42 * 60 * 1000), // 42 minutes ago
                severity: 'Critical',
                status: 'Active',
                servicenowTicket: 'INC0012435',
                predictive: false,
                autoCreated: true
            },
            {
                id: 'AL004',
                type: 'predictive',
                category: 'Power Systems',
                assetId: 'UPS-003',
                assetName: 'Eaton 9PX',
                facility: 'LA1',
                title: 'UPS Battery Degradation Detected',
                description: 'Battery capacity trending downward. Predicted replacement needed in 2-3 weeks.',
                timestamp: new Date(Date.now() - 55 * 60 * 1000), // 55 minutes ago
                severity: 'Warning',
                status: 'Predicted',
                confidence: 84,
                timeToFailure: '2-3 weeks',
                predictive: true,
                autoCreated: false
            },
            {
                id: 'AL005',
                type: 'servicenow',
                category: 'Servers',
                assetId: 'SRV-042',
                assetName: 'HPE ProLiant DL380',
                facility: 'LA1',
                title: 'ServiceNow Ticket Created',
                description: 'Incident ticket INC0012434 created for server temperature issue. Senior technician assigned.',
                timestamp: new Date(Date.now() - 5 * 60 * 1000), // 5 minutes ago
                severity: 'Info',
                status: 'In Progress',
                servicenowTicket: 'INC0012434',
                predictive: false,
                autoCreated: true
            },
            {
                id: 'AL006',
                type: 'critical',
                category: 'Environmental Systems',
                assetId: 'ENV-007',
                assetName: 'Water Leak Detection',
                facility: 'DC1',
                title: 'Water Leak Detected',
                description: 'Water leak sensor ENV-007 triggered in server room DC1-Z3. Emergency response activated.',
                timestamp: new Date(Date.now() - 18 * 60 * 1000), // 18 minutes ago
                severity: 'Critical',
                status: 'Active',
                servicenowTicket: 'INC0012436',
                predictive: false,
                autoCreated: true
            },
            {
                id: 'AL007',
                type: 'servicenow',
                category: 'Network Equipment',
                assetId: 'NET-012',
                assetName: 'Arista 7280R3',
                facility: 'NY1',
                title: 'ServiceNow Ticket Created',
                description: 'Incident ticket INC0012435 created for network switch failure. Network specialist dispatched.',
                timestamp: new Date(Date.now() - 38 * 60 * 1000), // 38 minutes ago
                severity: 'Info',
                status: 'In Progress',
                servicenowTicket: 'INC0012435',
                predictive: false,
                autoCreated: true
            },
            {
                id: 'AL008',
                type: 'predictive',
                category: 'Storage Systems',
                assetId: 'SAN-007',
                assetName: 'HPE Primera',
                facility: 'SV1',
                title: 'Storage Drive Health Declining',
                description: 'Multiple SSDs showing increased error rates. Proactive replacement recommended.',
                timestamp: new Date(Date.now() - 67 * 60 * 1000), // 67 minutes ago
                severity: 'Warning',
                status: 'Predicted',
                confidence: 78,
                timeToFailure: '1-2 weeks',
                predictive: true,
                autoCreated: false
            },
            {
                id: 'AL009',
                type: 'servicenow',
                category: 'Environmental Systems',
                assetId: 'ENV-007',
                assetName: 'Water Leak Detection',
                facility: 'DC1',
                title: 'ServiceNow Ticket Created',
                description: 'Emergency incident ticket INC0012436 created for water leak. Facility team responding.',
                timestamp: new Date(Date.now() - 15 * 60 * 1000), // 15 minutes ago
                severity: 'Info',
                status: 'In Progress',
                servicenowTicket: 'INC0012436',
                predictive: false,
                autoCreated: true
            },
            {
                id: 'AL010',
                type: 'critical',
                category: 'Power Systems',
                assetId: 'PDU-007',
                assetName: 'Raritan PX3',
                facility: 'CH1',
                title: 'PDU Power Load Critical',
                description: 'Power distribution unit PDU-007 operating at 96% capacity. Load balancing required.',
                timestamp: new Date(Date.now() - 33 * 60 * 1000), // 33 minutes ago
                severity: 'Critical',
                status: 'Active',
                servicenowTicket: 'INC0012437',
                predictive: false,
                autoCreated: true
            },
            {
                id: 'AL011',
                type: 'servicenow',
                category: 'Power Systems',
                assetId: 'PDU-007',
                assetName: 'Raritan PX3',
                facility: 'CH1',
                title: 'ServiceNow Ticket Created',
                description: 'Incident ticket INC0012437 created for PDU overload. Power engineer assigned.',
                timestamp: new Date(Date.now() - 30 * 60 * 1000), // 30 minutes ago
                severity: 'Info',
                status: 'In Progress',
                servicenowTicket: 'INC0012437',
                predictive: false,
                autoCreated: true
            },
            {
                id: 'AL012',
                type: 'predictive',
                category: 'Servers',
                assetId: 'SRV-124',
                assetName: 'Cisco UCS C240 M5',
                facility: 'LA1',
                title: 'Memory Module Failure Prediction',
                description: 'ECC error rates increasing on memory module. Predicted failure in 5-7 days.',
                timestamp: new Date(Date.now() - 78 * 60 * 1000), // 78 minutes ago
                severity: 'Warning',
                status: 'Predicted',
                confidence: 87,
                timeToFailure: '5-7 days',
                predictive: true,
                autoCreated: false
            }
        ];

        // Function to format time ago
        function timeAgo(date) {
            const now = new Date();
            const diffInMinutes = Math.floor((now - date) / (1000 * 60));
            
            if (diffInMinutes < 1) return 'Just now';
            if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
            
            const diffInHours = Math.floor(diffInMinutes / 60);
            if (diffInHours < 24) return `${diffInHours}h ago`;
            
            const diffInDays = Math.floor(diffInHours / 24);
            return `${diffInDays}d ago`;
        }

        // Function to populate alerts in the panel
        function populateAlerts(filter = 'all') {
            const container = document.getElementById('alerts-container');
            container.innerHTML = '';

            const filteredAlerts = realTimeAlerts.filter(alert => {
                if (filter === 'all') return true;
                return alert.type === filter;
            });

            // Sort by timestamp (newest first)
            filteredAlerts.sort((a, b) => b.timestamp - a.timestamp);

            filteredAlerts.forEach(alert => {
                const alertItem = document.createElement('div');
                alertItem.className = 'border-b border-coresite-border p-4 hover:bg-coresite-panel cursor-pointer transition-colors';
                
                // Determine icon and colors based on alert type and severity
                let iconClass = 'fas fa-exclamation-triangle';
                let iconColor = 'text-yellow-500';
                let borderColor = 'border-l-yellow-500';
                
                if (alert.type === 'critical') {
                    iconClass = 'fas fa-exclamation-circle';
                    iconColor = 'text-red-500';
                    borderColor = 'border-l-red-500';
                } else if (alert.type === 'predictive') {
                    iconClass = 'fas fa-brain';
                    iconColor = 'text-orange-500';
                    borderColor = 'border-l-orange-500';
                } else if (alert.type === 'servicenow') {
                    iconClass = 'fas fa-ticket-alt';
                    iconColor = 'text-blue-500';
                    borderColor = 'border-l-blue-500';
                }

                alertItem.innerHTML = `
                    <div class="border-l-4 ${borderColor} pl-3">
                        <div class="flex items-start justify-between">
                            <div class="flex items-start space-x-3 flex-1">
                                <i class="${iconClass} ${iconColor} text-lg mt-1"></i>
                                <div class="flex-1">
                                    <div class="font-semibold text-sm">${alert.title}</div>
                                    <div class="text-xs text-gray-400 mt-1">${alert.assetName} • ${alert.facility}</div>
                                    <div class="text-sm text-gray-300 mt-2">${alert.description}</div>
                                    
                                    ${alert.predictive ? `
                                        <div class="mt-2 flex items-center space-x-4 text-xs">
                                            <div class="flex items-center">
                                                <span class="text-gray-400">Confidence:</span>
                                                <span class="ml-1 text-orange-400 font-semibold">${alert.confidence}%</span>
                                            </div>
                                            <div class="flex items-center">
                                                <span class="text-gray-400">Time to Failure:</span>
                                                <span class="ml-1 text-orange-400 font-semibold">${alert.timeToFailure}</span>
                                            </div>
                                        </div>
                                    ` : ''}
                                    
                                    ${alert.servicenowTicket ? `
                                        <div class="mt-2 flex items-center space-x-2">
                                            <span class="bg-blue-600 text-white px-2 py-1 rounded text-xs font-semibold">${alert.servicenowTicket}</span>
                                            ${alert.autoCreated ? '<span class="bg-green-600 text-white px-2 py-1 rounded text-xs">Auto-Created</span>' : ''}
                                        </div>
                                    ` : ''}
                                    
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-gray-500">${timeAgo(alert.timestamp)}</span>
                                        <div class="flex space-x-2">
                                            ${alert.predictive ? `
                                                <button class="text-xs bg-orange-600 hover:bg-orange-700 text-white px-2 py-1 rounded" onclick="schedulePreventiveMaintenance('${alert.id}')">
                                                    Schedule Maintenance
                                                </button>
                                            ` : ''}
                                            ${alert.servicenowTicket ? `
                                                <button class="text-xs bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded" onclick="showServiceNowTicket('${alert.servicenowTicket}')">
                                                    View Ticket
                                                </button>
                                            ` : alert.type === 'critical' && !alert.servicenowTicket ? `
                                                <button class="text-xs bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded" onclick="createServiceNowTicket('${alert.id}')">
                                                    Create Ticket
                                                </button>
                                            ` : ''}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

                alertItem.addEventListener('click', (e) => {
                    if (!e.target.closest('button')) {
                        // Navigate to the asset if clicking on the alert but not on buttons
                        navigateToAsset(alert.facility, alert.assetId);
                    }
                });

                container.appendChild(alertItem);
            });

            // Update counters
            updateAlertCounters();
        }

        // Function to update alert counters
        function updateAlertCounters() {
            const criticalCount = realTimeAlerts.filter(a => a.type === 'critical').length;
            const predictiveCount = realTimeAlerts.filter(a => a.type === 'predictive').length;
            const servicenowCount = realTimeAlerts.filter(a => a.type === 'servicenow').length;
            const totalCount = realTimeAlerts.length;

            document.getElementById('alert-count').textContent = totalCount;
            document.getElementById('all-count').textContent = totalCount;
            document.getElementById('critical-count').textContent = criticalCount;
            document.getElementById('predictive-count').textContent = predictiveCount;
            document.getElementById('servicenow-count').textContent = servicenowCount;
        }

        // Function to navigate to specific asset
        function navigateToAsset(facilityCode, assetId) {
            // This would navigate to the specific asset in the facility
            // For demo purposes, we'll navigate to the facility
            navigateTo(facilityCode, 2);
            
            // Close alerts panel
            document.getElementById('alerts-panel').classList.add('translate-x-full');
            document.getElementById('alerts-overlay').classList.add('hidden');
        }

        // Function to create ServiceNow ticket
        function createServiceNowTicket(alertId) {
            const alert = realTimeAlerts.find(a => a.id === alertId);
            if (!alert) return;

            // Generate ticket number
            const ticketNumber = `INC00${Math.floor(Math.random() * 90000) + 10000}`;
            
            // Update alert with ticket info
            alert.servicenowTicket = ticketNumber;
            alert.autoCreated = true;

            // Add new ServiceNow alert
            const servicenowAlert = {
                id: `AL${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}`,
                type: 'servicenow',
                category: alert.category,
                assetId: alert.assetId,
                assetName: alert.assetName,
                facility: alert.facility,
                title: 'ServiceNow Ticket Created',
                description: `Incident ticket ${ticketNumber} created automatically by blauLabs AI. Technician will be assigned shortly.`,
                timestamp: new Date(),
                severity: 'Info',
                status: 'In Progress',
                servicenowTicket: ticketNumber,
                predictive: false,
                autoCreated: true
            };

            realTimeAlerts.unshift(servicenowAlert);

            // Show ServiceNow ticket modal
            showServiceNowTicket(ticketNumber);

            // Refresh alerts display
            populateAlerts(currentAlertFilter);
        }

        // Function to show ServiceNow ticket details
        function showServiceNowTicket(ticketNumber) {
            const alert = realTimeAlerts.find(a => a.servicenowTicket === ticketNumber);
            if (!alert) return;

            const modal = document.getElementById('servicenow-modal');
            const content = document.getElementById('servicenow-ticket-content');

            const priority = alert.severity === 'Critical' ? 'High' : alert.severity === 'Warning' ? 'Medium' : 'Low';
            const assignedTo = 'Mike Rodriguez (Senior DC Technician)';
            const estimatedResolution = alert.severity === 'Critical' ? '2 hours' : '8 hours';

            content.innerHTML = `
                <div class="bg-coresite-panel border border-coresite-border rounded-lg p-4 mb-4">
                    <div class="flex items-center justify-between mb-3">
                        <h4 class="text-lg font-semibold">${ticketNumber}</h4>
                        <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm">In Progress</span>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div>
                            <div class="text-gray-400">Priority</div>
                            <div class="font-semibold">${priority}</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Created</div>
                            <div>${timeAgo(alert.timestamp)}</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Assigned To</div>
                            <div>${assignedTo}</div>
                        </div>
                        <div>
                            <div class="text-gray-400">Est. Resolution</div>
                            <div>${estimatedResolution}</div>
                        </div>
                    </div>
                </div>

                <div class="space-y-4">
                    <div>
                        <h5 class="font-semibold mb-2">Asset Information</h5>
                        <div class="bg-coresite-panel rounded p-3 text-sm">
                            <div class="grid grid-cols-2 gap-3">
                                <div>
                                    <span class="text-gray-400">Asset ID:</span>
                                    <span class="ml-2">${alert.assetId}</span>
                                </div>
                                <div>
                                    <span class="text-gray-400">Asset Name:</span>
                                    <span class="ml-2">${alert.assetName}</span>
                                </div>
                                <div>
                                    <span class="text-gray-400">Facility:</span>
                                    <span class="ml-2">${alert.facility}</span>
                                </div>
                                <div>
                                    <span class="text-gray-400">Category:</span>
                                    <span class="ml-2">${alert.category}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h5 class="font-semibold mb-2">Issue Description</h5>
                        <div class="bg-coresite-panel rounded p-3 text-sm">
                            ${alert.description}
                        </div>
                    </div>

                    <div>
                        <h5 class="font-semibold mb-2">AI Recommendations</h5>
                        <div class="bg-coresite-panel rounded p-3 text-sm">
                            <ul class="space-y-2">
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                                    <span>Immediate thermal assessment of affected server rack</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                                    <span>Check HVAC airflow and cooling system performance</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-check-circle text-green-500 mr-2 mt-0.5"></i>
                                    <span>Verify server fan operations and clean dust buildup</span>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div>
                        <h5 class="font-semibold mb-2">Required Actions</h5>
                        <div class="bg-coresite-panel rounded p-3 text-sm">
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>Temperature monitoring probe deployment</span>
                                    <span class="text-green-500">✓ Available</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Thermal imaging camera inspection</span>
                                    <span class="text-green-500">✓ Scheduled</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>HVAC system performance check</span>
                                    <span class="text-yellow-500">⚠ Pending</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            modal.classList.remove('hidden');
        }

        // Function to schedule preventive maintenance
        function schedulePreventiveMaintenance(alertId) {
            const alert = realTimeAlerts.find(a => a.id === alertId);
            if (!alert) return;

            // Generate work order
            const workOrderNumber = `WO${Math.floor(Math.random() * 90000) + 10000}`;
            
            // Add to maintenance data
            const newMaintenance = {
                id: workOrderNumber,
                assetId: alert.assetId,
                assetName: alert.assetName,
                facility: `${alert.facility} - T-Mobile Data Center`,
                type: 'Predictive',
                priority: 'High',
                scheduledDate: new Date(Date.now() + 24 * 60 * 60 * 1000), // Tomorrow
                status: 'Scheduled',
                technician: 'Mike Rodriguez',
                description: `Predictive maintenance based on AI alert ${alertId}. ${alert.description}`,
                category: alert.category
            };

            maintenanceData.unshift(newMaintenance);

            // Update alert status
            alert.status = 'Maintenance Scheduled';

            // Add new maintenance alert
            const maintenanceAlert = {
                id: `AL${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}`,
                type: 'servicenow',
                category: alert.category,
                assetId: alert.assetId,
                assetName: alert.assetName,
                facility: alert.facility,
                title: 'Preventive Maintenance Scheduled',
                description: `Work order ${workOrderNumber} created for predictive maintenance. Scheduled for tomorrow 10:00 AM.`,
                timestamp: new Date(),
                severity: 'Info',
                status: 'Scheduled',
                servicenowTicket: workOrderNumber,
                predictive: false,
                autoCreated: true
            };

            realTimeAlerts.unshift(maintenanceAlert);

            // Refresh alerts display
            populateAlerts(currentAlertFilter);

            // Show success message
            showNotification('Preventive maintenance scheduled successfully! Check Maintenance Dashboard for details.', 'success');

            // If maintenance dashboard is open, refresh it
            if (!document.getElementById('maintenance-dashboard').classList.contains('hidden')) {
                populateMaintenanceTable();
            }
        }

        // Function to show notifications
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-70 p-4 rounded-md shadow-lg text-white ${
                type === 'success' ? 'bg-green-600' : 
                type === 'error' ? 'bg-red-600' : 
                'bg-blue-600'
            }`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : 'info'}-circle mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Alert filter state
        let currentAlertFilter = 'all';

        // Function to populate enhanced regions
        function populateRegions() {
            const container = document.getElementById('regions-grid');
            container.innerHTML = '';
            
            const regionData = [
                {
                    name: 'North America',
                    facilities: 8,
                    zones: 47,
                    totalServers: 6847,
                    countries: ['USA', 'Canada'],
                    utilization: 82.4,
                    uptime: 99.97,
                    avgPUE: 1.23
                },
                {
                    name: 'Europe',
                    facilities: 5,
                    zones: 28,
                    totalServers: 3956,
                    countries: ['UK', 'Netherlands', 'Germany', 'France', 'Spain'],
                    utilization: 78.7,
                    uptime: 99.95,
                    avgPUE: 1.28
                },
                {
                    name: 'Asia Pacific',
                    facilities: 7,
                    zones: 39,
                    totalServers: 5421,
                    countries: ['Japan', 'Singapore', 'Australia', 'Hong Kong', 'South Korea', 'India', 'Thailand'],
                    utilization: 85.1,
                    uptime: 99.98,
                    avgPUE: 1.19
                },
                {
                    name: 'Latin America',
                    facilities: 5,
                    zones: 18,
                    totalServers: 2418,
                    countries: ['Brazil', 'Mexico', 'Argentina', 'Peru', 'Chile'],
                    utilization: 74.2,
                    uptime: 99.89,
                    avgPUE: 1.31
                }
            ];
            
            regionData.forEach(region => {
                const regionCard = document.createElement('div');
                regionCard.className = 'bg-coresite-panel border border-coresite-border rounded-lg overflow-hidden nav-item cursor-pointer transform transition-all duration-200 hover:scale-105';
                regionCard.onclick = () => navigateTo(region.name, 1);
                
                // Calculate alerts for the region
                const alerts = calculateAlerts(region.name, 'region');
                const totalAlerts = alerts.critical + alerts.warning;
                
                // Determine overall region status based on utilization and alerts
                let regionStatus = 'Optimal Performance';
                let statusColor = 'text-green-500';
                let statusBgColor = 'bg-green-500';
                let statusIcon = 'fas fa-check-circle';
                
                if (alerts.critical > 3) {
                    regionStatus = 'Critical Issues';
                    statusColor = 'text-red-500';
                    statusBgColor = 'bg-red-500';
                    statusIcon = 'fas fa-exclamation-circle';
                } else if (alerts.warning > 5 || region.utilization > 90) {
                    regionStatus = 'Needs Attention';
                    statusColor = 'text-yellow-500';
                    statusBgColor = 'bg-yellow-500';
                    statusIcon = 'fas fa-exclamation-triangle';
                } else if (region.uptime >= 99.95) {
                    regionStatus = 'Exceptional Performance';
                    statusColor = 'text-blue-500';
                    statusBgColor = 'bg-blue-500';
                    statusIcon = 'fas fa-award';
                }
                
                // Generate additional metrics
                const powerEfficiency = Math.floor(region.avgPUE * 100 - 95); // Convert PUE to efficiency percentage
                const carbonReduction = Math.floor(15 + Math.random() * 10); // 15-25% carbon reduction
                const lastUpdate = new Date();
                const timeString = lastUpdate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                regionCard.innerHTML = `
                    <!-- Status Header -->
                    <div class="bg-coresite-darker p-3 border-b border-coresite-border">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-full ${statusBgColor} mr-2 animate-pulse"></div>
                                <span class="text-sm font-semibold ${statusColor}">${regionStatus}</span>
                            </div>
                            <div class="flex items-center text-xs text-gray-400">
                                <i class="fas fa-globe mr-1"></i>
                                <span>${region.countries.length} countries</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Region Info -->
                    <div class="p-4">
                        <div class="flex items-center justify-between mb-3">
                            <div>
                                <h3 class="text-xl font-bold text-white">${region.name.toUpperCase()}</h3>
                                <p class="text-sm text-gray-300 font-medium">${region.countries.slice(0, 3).join(', ')}${region.countries.length > 3 ? '...' : ''}</p>
                                <p class="text-xs text-gray-400 mt-1">
                                    <i class="fas fa-clock mr-1"></i>Last updated: ${timeString}
                                </p>
                            </div>
                            <div class="text-right">
                                <i class="fas fa-arrow-right text-coresite-blue text-xl"></i>
                            </div>
                        </div>
                        
                        <!-- Key Regional Metrics -->
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div class="bg-coresite-darker rounded-md p-2">
                                <div class="text-xs text-gray-400">Avg Utilization</div>
                                <div class="text-lg font-bold ${region.utilization >= 90 ? 'text-red-500' : region.utilization >= 80 ? 'text-yellow-500' : 'text-green-500'}">${region.utilization.toFixed(1)}%</div>
                                <div class="w-full bg-gray-700 rounded-full h-1 mt-1">
                                    <div class="${region.utilization >= 90 ? 'bg-red-500' : region.utilization >= 80 ? 'bg-yellow-500' : 'bg-green-500'} h-1 rounded-full transition-all duration-300" style="width: ${region.utilization}%"></div>
                                </div>
                            </div>
                            <div class="bg-coresite-darker rounded-md p-2">
                                <div class="text-xs text-gray-400">Uptime</div>
                                <div class="text-lg font-bold text-green-400">${region.uptime}%</div>
                                <div class="text-xs text-gray-500">SLA: 99.9%</div>
                            </div>
                        </div>
                        
                        <!-- Infrastructure Overview -->
                        <div class="mb-4">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-300">Infrastructure</span>
                                ${totalAlerts > 0 ? `<span class="bg-red-500 text-white text-xs px-2 py-1 rounded-full">${totalAlerts} alerts</span>` : ''}
                            </div>
                            <div class="grid grid-cols-3 gap-2 text-xs">
                                <div class="flex items-center">
                                    <i class="fas fa-building text-coresite-blue mr-1"></i>
                                    <span class="text-gray-400">DCs:</span>
                                    <span class="text-white font-medium ml-1">${region.facilities}</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-server text-coresite-blue mr-1"></i>
                                    <span class="text-gray-400">Zones:</span>
                                    <span class="text-white font-medium ml-1">${region.zones}</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-microchip text-coresite-blue mr-1"></i>
                                    <span class="text-gray-400">Servers:</span>
                                    <span class="text-white font-medium ml-1">${region.totalServers.toLocaleString()}</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Performance Indicators -->
                        <div class="grid grid-cols-3 gap-2 text-xs mb-4">
                            <div class="text-center">
                                <div class="text-gray-400">Avg PUE</div>
                                <div class="font-bold text-purple-400">${region.avgPUE}</div>
                            </div>
                            <div class="text-center">
                                <div class="text-gray-400">Latency</div>
                                <div class="font-bold text-cyan-400">${(1.0 + Math.random() * 2).toFixed(1)}ms</div>
                            </div>
                            <div class="text-center">
                                <div class="text-gray-400">Carbon ↓</div>
                                <div class="font-bold text-green-400">${carbonReduction}%</div>
                            </div>
                        </div>
                        
                        <!-- Sustainability Metrics -->
                        <div class="bg-gradient-to-r from-green-900/30 to-blue-900/30 rounded-md p-2 mb-3">
                            <div class="flex items-center justify-between text-xs">
                                <div class="flex items-center">
                                    <i class="fas fa-leaf text-green-400 mr-1"></i>
                                    <span class="text-gray-300">Efficiency Score</span>
                                </div>
                                <span class="text-green-400 font-bold">${(region.uptime * 0.9 + (100 - region.avgPUE * 30)).toFixed(1)}%</span>
                            </div>
                            <div class="w-full bg-gray-800 rounded-full h-1 mt-1">
                                <div class="bg-gradient-to-r from-green-500 to-blue-500 h-1 rounded-full" style="width: ${region.uptime * 0.9 + (100 - region.avgPUE * 30)}%"></div>
                            </div>
                        </div>
                        
                        <!-- Action Indicators -->
                        <div class="pt-3 border-t border-coresite-border">
                            <div class="flex items-center justify-between text-xs">
                                <div class="flex items-center text-gray-400">
                                    <i class="${statusIcon} mr-1"></i>
                                    <span>Real-time monitoring</span>
                                </div>
                                <div class="flex items-center text-coresite-blue">
                                    <span>View ${region.facilities} Facilities</span>
                                    <i class="fas fa-chevron-right ml-1"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(regionCard);
            });
        }

        // Event listeners for alerts panel
        document.addEventListener('DOMContentLoaded', () => {
            buildTreeView();
            populateAlerts();
            populateRegions();

            // Toggle alerts panel
            document.getElementById('alerts-panel-toggle').addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('alerts-panel').classList.toggle('translate-x-full');
                document.getElementById('alerts-overlay').classList.toggle('hidden');
            });

            // Close alerts panel
            document.getElementById('close-alerts-panel').addEventListener('click', () => {
                document.getElementById('alerts-panel').classList.add('translate-x-full');
                document.getElementById('alerts-overlay').classList.add('hidden');
            });

            // Close alerts panel when clicking overlay
            document.getElementById('alerts-overlay').addEventListener('click', () => {
                document.getElementById('alerts-panel').classList.add('translate-x-full');
                document.getElementById('alerts-overlay').classList.add('hidden');
            });

            // Alert filter buttons
            document.querySelectorAll('.alert-filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // Update button states
                    document.querySelectorAll('.alert-filter-btn').forEach(b => {
                        b.classList.remove('bg-coresite-blue', 'text-white');
                        b.classList.add('bg-coresite-panel', 'text-gray-300');
                    });
                    btn.classList.remove('bg-coresite-panel', 'text-gray-300');
                    btn.classList.add('bg-coresite-blue', 'text-white');

                    // Filter alerts
                    currentAlertFilter = btn.dataset.type;
                    populateAlerts(currentAlertFilter);
                });
            });

            // ServiceNow modal event listeners
            document.getElementById('close-servicenow-modal').addEventListener('click', () => {
                document.getElementById('servicenow-modal').classList.add('hidden');
            });

            document.getElementById('close-servicenow-modal-btn').addEventListener('click', () => {
                document.getElementById('servicenow-modal').classList.add('hidden');
            });

            document.getElementById('view-in-servicenow').addEventListener('click', () => {
                showNotification('Opening ServiceNow portal...', 'info');
                // In a real implementation, this would open the ServiceNow portal
            });

            // Simulate real-time alerts (add new alert every 20 seconds for demo)
            setInterval(() => {
                if (Math.random() < 0.3) { // 30% chance every 20 seconds
                    addRandomAlert();
                }
            }, 20000); // 20 seconds for demo
        });

        // Function to add random real-time alert
        function addRandomAlert() {
            const alertTypes = ['predictive', 'critical'];
            const randomType = alertTypes[Math.floor(Math.random() * alertTypes.length)];
            
            const assetCategories = Object.keys(assets);
            const randomCategory = assetCategories[Math.floor(Math.random() * assetCategories.length)];
            const categoryAssets = assets[randomCategory];
            const randomAsset = categoryAssets[Math.floor(Math.random() * categoryAssets.length)];
            
            const facilityCodes = ['LA1', 'NY1', 'SV1', 'DC1', 'CH1'];
            const randomFacility = facilityCodes[Math.floor(Math.random() * facilityCodes.length)];
            
            const newAlert = {
                id: `AL${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}`,
                type: randomType,
                category: randomCategory,
                assetId: randomAsset.id,
                assetName: randomAsset.name,
                facility: randomFacility,
                title: randomType === 'predictive' ? 'Predictive Maintenance Alert' : 'Equipment Issue Detected',
                description: randomType === 'predictive' ? 
                    'AI model detected anomalous patterns suggesting potential component failure.' :
                    'Equipment performance has degraded below operational thresholds.',
                timestamp: new Date(),
                severity: randomType === 'predictive' ? 'Warning' : 'Critical',
                status: randomType === 'predictive' ? 'Predicted' : 'Active',
                predictive: randomType === 'predictive',
                autoCreated: false
            };

            if (randomType === 'predictive') {
                newAlert.confidence = 70 + Math.floor(Math.random() * 25); // 70-95%
                const timeOptions = ['24-48 hours', '2-3 days', '1-2 weeks', '48-72 hours'];
                newAlert.timeToFailure = timeOptions[Math.floor(Math.random() * timeOptions.length)];
            }

            realTimeAlerts.unshift(newAlert);
            
            // Update display if alerts panel is open
            if (!document.getElementById('alerts-panel').classList.contains('translate-x-full')) {
                populateAlerts(currentAlertFilter);
            } else {
                updateAlertCounters();
            }

            // Show notification
            showNotification(`New ${randomType} alert: ${newAlert.title}`, 'info');
        }

        // Maintenance Dashboard Data and Functions
        const maintenanceData = [
            {
                id: 'WO12234',
                assetId: 'HVAC-001',
                assetName: 'Liebert CRV',
                facility: 'LA1 - T-Mobile Los Angeles',
                type: 'Predictive',
                priority: 'High',
                scheduledDate: new Date(Date.now() + 2 * 24 * 60 * 60 * 1000), // 2 days from now
                status: 'Scheduled',
                technician: 'Mike Rodriguez',
                description: 'Replace compressor based on predictive analytics (91% failure confidence)',
                category: 'Cooling Systems'
            },
            {
                id: 'WO12235',
                assetId: 'UPS-003',
                assetName: 'Eaton 9PX',
                facility: 'LA1 - T-Mobile Los Angeles',
                type: 'Predictive',
                priority: 'Medium',
                scheduledDate: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days from now
                status: 'Scheduled',
                technician: 'David Chang',
                description: 'Battery replacement based on capacity trend analysis',
                category: 'Power Systems'
            },
            {
                id: 'WO12236',
                assetId: 'NET-012',
                assetName: 'Arista 7280R3',
                facility: 'NY1 - T-Mobile New York',
                type: 'Corrective',
                priority: 'Critical',
                scheduledDate: new Date(Date.now() + 1 * 60 * 60 * 1000), // 1 hour from now
                status: 'In Progress',
                technician: 'Sarah Kim',
                description: 'Replace failed ports on network switch',
                category: 'Network Equipment'
            },
            {
                id: 'WO12237',
                assetId: 'ENV-007',
                assetName: 'Water Leak Detection',
                facility: 'DC1 - T-Mobile Washington DC',
                type: 'Emergency',
                priority: 'Critical',
                scheduledDate: new Date(Date.now() - 1 * 60 * 60 * 1000), // 1 hour ago
                status: 'In Progress',
                technician: 'Lisa Garcia',
                description: 'Emergency response to water leak detection alert',
                category: 'Environmental Systems'
            },
            {
                id: 'WO12238',
                assetId: 'SRV-124',
                assetName: 'Cisco UCS C240 M5',
                facility: 'LA1 - T-Mobile Los Angeles',
                type: 'Predictive',
                priority: 'Medium',
                scheduledDate: new Date(Date.now() + 5 * 24 * 60 * 60 * 1000), // 5 days from now
                status: 'Scheduled',
                technician: 'Mike Rodriguez',
                description: 'Memory module replacement based on ECC error patterns',
                category: 'Servers'
            },
            {
                id: 'WO12239',
                assetId: 'PDU-001',
                assetName: 'APC InRow PDU',
                facility: 'SV1 - AT&T Silicon Valley',
                type: 'Preventive',
                priority: 'Low',
                scheduledDate: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 hours ago
                status: 'Completed',
                technician: 'David Chang',
                description: 'Monthly power distribution unit inspection and calibration',
                category: 'Power Systems'
            }
        ];

        // Function to format date for display
        function formatDate(date) {
            return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }

        // Function to populate maintenance table
        function populateMaintenanceTable(filter = 'all') {
            const tableBody = document.getElementById('maintenance-table-body');
            tableBody.innerHTML = '';

            const filteredData = maintenanceData.filter(item => {
                if (filter === 'all') return true;
                if (filter === 'scheduled') return item.status === 'Scheduled';
                if (filter === 'in-progress') return item.status === 'In Progress';
                if (filter === 'predictive') return item.type === 'Predictive';
                return false;
            });

            // Sort by scheduled date
            filteredData.sort((a, b) => a.scheduledDate - b.scheduledDate);

            filteredData.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-coresite-darker';

                // Determine status badge
                let statusBadge = '';
                if (item.status === 'Scheduled') {
                    statusBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Scheduled</span>';
                } else if (item.status === 'In Progress') {
                    statusBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">In Progress</span>';
                } else if (item.status === 'Completed') {
                    statusBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Completed</span>';
                }

                // Determine priority badge
                let priorityBadge = '';
                if (item.priority === 'Critical') {
                    priorityBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Critical</span>';
                } else if (item.priority === 'High') {
                    priorityBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-orange-100 text-orange-800">High</span>';
                } else if (item.priority === 'Medium') {
                    priorityBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Medium</span>';
                } else {
                    priorityBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">Low</span>';
                }

                // Determine type badge
                let typeBadge = '';
                if (item.type === 'Predictive') {
                    typeBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800">Predictive</span>';
                } else if (item.type === 'Preventive') {
                    typeBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Preventive</span>';
                } else if (item.type === 'Corrective') {
                    typeBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Corrective</span>';
                } else if (item.type === 'Emergency') {
                    typeBadge = '<span class="px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Emergency</span>';
                }

                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">${item.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">
                        <div class="font-medium">${item.assetId}</div>
                        <div class="text-xs text-gray-400">${item.assetName}</div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-300">
                        <div>${item.facility}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">${typeBadge}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${priorityBadge}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">${formatDate(item.scheduledDate)}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${statusBadge}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">${item.technician}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-400">
                        <button class="hover:text-white mr-3" onclick="viewMaintenanceDetails('${item.id}')">
                            <i class="fas fa-eye"></i>
                        </button>
                        <button class="hover:text-white mr-3" onclick="editMaintenance('${item.id}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="hover:text-white" onclick="updateMaintenanceStatus('${item.id}')">
                            <i class="fas fa-check-circle"></i>
                        </button>
                    </td>
                `;

                tableBody.appendChild(row);
            });

            // Update statistics
            updateMaintenanceStats();
        }

        // Function to update maintenance statistics
        function updateMaintenanceStats() {
            const scheduledCount = maintenanceData.filter(item => item.status === 'Scheduled').length;
            const inProgressCount = maintenanceData.filter(item => item.status === 'In Progress').length;
            const predictiveCount = maintenanceData.filter(item => item.type === 'Predictive').length;
            const completedTodayCount = maintenanceData.filter(item => {
                const today = new Date();
                const itemDate = item.scheduledDate;
                return item.status === 'Completed' && 
                       itemDate.toDateString() === today.toDateString();
            }).length;

            document.getElementById('scheduled-count').textContent = scheduledCount;
            document.getElementById('inprogress-count').textContent = inProgressCount;
            document.getElementById('predictive-alerts-count').textContent = predictiveCount;
            document.getElementById('completed-count').textContent = completedTodayCount;
        }

        // Function to populate asset dropdown in schedule form
        function populateAssetDropdown() {
            const assetSelect = document.getElementById('asset-select');
            assetSelect.innerHTML = '<option value="">Select Asset</option>';

            // Add all assets from all categories
            Object.keys(assets).forEach(category => {
                assets[category].forEach(asset => {
                    const option = document.createElement('option');
                    option.value = asset.id;
                    option.textContent = `${asset.id} - ${asset.name}`;
                    option.dataset.category = category;
                    assetSelect.appendChild(option);
                });
            });
        }

        // Function to handle maintenance dashboard toggle
        function toggleMaintenanceDashboard() {
            const dashboard = document.getElementById('maintenance-dashboard');
            dashboard.classList.toggle('hidden');
            
            if (!dashboard.classList.contains('hidden')) {
                populateMaintenanceTable();
                populateAssetDropdown();
            }
        }

        // Function to view maintenance details
        function viewMaintenanceDetails(workOrderId) {
            const maintenance = maintenanceData.find(m => m.id === workOrderId);
            if (!maintenance) return;
            
            showNotification(`Viewing details for ${workOrderId}: ${maintenance.description}`, 'info');
        }

        // Function to edit maintenance
        function editMaintenance(workOrderId) {
            showNotification(`Edit functionality for ${workOrderId} would open here`, 'info');
        }

        // Function to update maintenance status
        function updateMaintenanceStatus(workOrderId) {
            const maintenance = maintenanceData.find(m => m.id === workOrderId);
            if (!maintenance) return;
            
            if (maintenance.status === 'Scheduled') {
                maintenance.status = 'In Progress';
            } else if (maintenance.status === 'In Progress') {
                maintenance.status = 'Completed';
            }
            
            populateMaintenanceTable();
            showNotification(`Status updated for ${workOrderId}`, 'success');
        }

        // Observability Dashboard Functions
        function populateCriticalAssetsList() {
            const criticalAssetsList = document.getElementById('critical-assets-list');
            criticalAssetsList.innerHTML = '';

            // Get assets with warning or critical status
            const criticalAssets = [];
            Object.keys(assets).forEach(category => {
                assets[category].forEach(asset => {
                    if (asset.status === 'Warning' || asset.status === 'Critical' || asset.status === 'Maintenance') {
                        criticalAssets.push({...asset, category});
                    }
                });
            });

            // Sort by performance (lowest first)
            criticalAssets.sort((a, b) => a.performance - b.performance);

            criticalAssets.slice(0, 5).forEach(asset => {
                const assetItem = document.createElement('div');
                assetItem.className = 'flex items-center justify-between p-3 bg-coresite-darker rounded-md border border-coresite-border';

                let statusColor = 'text-yellow-500';
                let statusIcon = 'fas fa-exclamation-triangle';
                if (asset.status === 'Critical') {
                    statusColor = 'text-red-500';
                    statusIcon = 'fas fa-exclamation-circle';
                } else if (asset.status === 'Maintenance') {
                    statusColor = 'text-blue-500';
                    statusIcon = 'fas fa-tools';
                }

                assetItem.innerHTML = `
                    <div class="flex items-center">
                        <i class="${statusIcon} ${statusColor} mr-3"></i>
                        <div>
                            <div class="font-semibold text-sm">${asset.id}</div>
                            <div class="text-xs text-gray-400">${asset.category}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-lg font-bold ${asset.performance < 70 ? 'text-red-500' : asset.performance < 80 ? 'text-yellow-500' : 'text-green-500'}">${asset.performance}%</div>
                        <div class="text-xs text-gray-400">${asset.status}</div>
                    </div>
                `;

                criticalAssetsList.appendChild(assetItem);
            });
        }

        function updateObservabilityMetrics() {
            const now = new Date();
            document.getElementById('last-updated').textContent = now.toLocaleTimeString();

            // Simulate real-time metric updates with small variations
            const healthElement = document.getElementById('overall-health');
            const currentHealth = parseFloat(healthElement.textContent);
            const newHealth = Math.max(95, Math.min(99.5, currentHealth + (Math.random() - 0.5) * 0.3));
            healthElement.textContent = newHealth.toFixed(1) + '%';

            const uptimeElement = document.getElementById('overall-uptime');
            const currentUptime = parseFloat(uptimeElement.textContent);
            const newUptime = Math.max(99.9, Math.min(99.99, currentUptime + (Math.random() - 0.5) * 0.01));
            uptimeElement.textContent = newUptime.toFixed(2) + '%';

            // Update category performance with small variations
            const categories = ['servers-performance', 'network-performance', 'power-performance', 'cooling-performance', 'storage-performance'];
            categories.forEach(categoryId => {
                const element = document.getElementById(categoryId);
                if (element) {
                    const current = parseFloat(element.textContent);
                    const variation = (Math.random() - 0.5) * 0.4;
                    const newValue = Math.max(90, Math.min(99, current + variation));
                    element.textContent = newValue.toFixed(1) + '%';
                    
                    // Update corresponding progress bar
                    const progressBar = element.closest('.asset-category-performance').querySelector('.h-2 > div');
                    if (progressBar) {
                        progressBar.style.width = newValue + '%';
                    }
                }
            });

            // Update key metrics with variations
            const metrics = ['mtbf', 'mttr', 'pue', 'cooling-efficiency', 'predictive-accuracy'];
            metrics.forEach(metricId => {
                const element = document.getElementById(metricId);
                if (element && metricId !== 'mttr' && metricId !== 'pue') {
                    const text = element.textContent;
                    if (text.includes('%')) {
                        const current = parseFloat(text);
                        const variation = (Math.random() - 0.5) * 0.3;
                        const newValue = Math.max(90, Math.min(99, current + variation));
                        element.textContent = newValue.toFixed(1) + '%';
                    } else if (text.includes('hrs')) {
                        const current = parseFloat(text);
                        const variation = (Math.random() - 0.5) * 20;
                        const newValue = Math.max(1200, Math.min(1400, current + variation));
                        element.textContent = Math.floor(newValue) + ' hrs';
                    }
                } else if (metricId === 'mttr') {
                    const current = parseFloat(element.textContent);
                    const variation = (Math.random() - 0.5) * 0.2;
                    const newValue = Math.max(1.2, Math.min(2.5, current + variation));
                    element.textContent = newValue.toFixed(1) + ' hrs';
                } else if (metricId === 'pue') {
                    const current = parseFloat(element.textContent);
                    const variation = (Math.random() - 0.5) * 0.02;
                    const newValue = Math.max(1.15, Math.min(1.35, current + variation));
                    element.textContent = newValue.toFixed(2);
                }
            });
        }

        function createPerformanceChart() {
            const canvas = document.getElementById('performance-trend-chart');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const width = canvas.width = canvas.offsetWidth;
            const height = canvas.height = canvas.offsetHeight;

            // Clear canvas
            ctx.clearRect(0, 0, width, height);

            // Generate sample data for the last 7 days
            const days = 7;
            const data = [];
            const labels = [];
            
            for (let i = days - 1; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                labels.push(date.toLocaleDateString('en-US', { weekday: 'short' }));
                
                // Generate realistic performance data with some variation
                const basePerformance = 96 + Math.sin(i * 0.5) * 2;
                data.push(basePerformance + (Math.random() - 0.5) * 3);
            }

            // Draw chart
            const padding = 40;
            const chartWidth = width - padding * 2;
            const chartHeight = height - padding * 2;

            // Draw grid lines and labels
            ctx.strokeStyle = '#374151';
            ctx.lineWidth = 1;
            ctx.font = '12px sans-serif';
            ctx.fillStyle = '#9CA3AF';

            // Horizontal grid lines
            for (let i = 0; i <= 5; i++) {
                const y = padding + (chartHeight / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();

                // Y-axis labels
                const value = 100 - (i * 4);
                ctx.fillText(value + '%', 5, y + 4);
            }

            // Vertical grid lines
            for (let i = 0; i < data.length; i++) {
                const x = padding + (chartWidth / (data.length - 1)) * i;
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();

                // X-axis labels
                ctx.fillText(labels[i], x - 15, height - 10);
            }

            // Draw performance line
            ctx.strokeStyle = '#0066cc';
            ctx.lineWidth = 3;
            ctx.beginPath();

            data.forEach((value, index) => {
                const x = padding + (chartWidth / (data.length - 1)) * index;
                const y = padding + chartHeight - ((value - 80) / 20) * chartHeight;

                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });

            ctx.stroke();

            // Draw data points
            ctx.fillStyle = '#0066cc';
            data.forEach((value, index) => {
                const x = padding + (chartWidth / (data.length - 1)) * index;
                const y = padding + chartHeight - ((value - 80) / 20) * chartHeight;

                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
            });
        }

        function toggleObservabilityDashboard() {
            const dashboard = document.getElementById('observability-dashboard');
            dashboard.classList.toggle('hidden');
            
            if (!dashboard.classList.contains('hidden')) {
                populateCriticalAssetsList();
                createPerformanceChart();
                updateObservabilityMetrics();
                
                // Set up real-time updates
                const updateInterval = setInterval(() => {
                    if (dashboard.classList.contains('hidden')) {
                        clearInterval(updateInterval);
                        return;
                    }
                    updateObservabilityMetrics();
                }, 5000); // Update every 5 seconds
            }
        }

        // Add maintenance dashboard event listeners to the existing DOMContentLoaded
        document.addEventListener('DOMContentLoaded', function() {
            // Maintenance dashboard toggle
            document.getElementById('maintenance-dashboard-toggle').addEventListener('click', (e) => {
                e.preventDefault();
                toggleMaintenanceDashboard();
            });

            // Observability dashboard toggle
            document.getElementById('observability-dashboard-toggle').addEventListener('click', (e) => {
                e.preventDefault();
                toggleObservabilityDashboard();
            });

            // Close observability dashboard
            document.getElementById('close-observability-dashboard').addEventListener('click', () => {
                document.getElementById('observability-dashboard').classList.add('hidden');
            });

            // Trend period buttons
            document.querySelectorAll('.trend-period-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // Update button states
                    document.querySelectorAll('.trend-period-btn').forEach(b => {
                        b.classList.remove('bg-coresite-blue', 'text-white', 'active');
                        b.classList.add('bg-coresite-panel', 'text-gray-300');
                    });
                    btn.classList.remove('bg-coresite-panel', 'text-gray-300');
                    btn.classList.add('bg-coresite-blue', 'text-white', 'active');

                    // Redraw chart with new period
                    createPerformanceChart();
                });
            });

            // Close maintenance dashboard
            document.getElementById('close-maintenance-dashboard').addEventListener('click', () => {
                document.getElementById('maintenance-dashboard').classList.add('hidden');
            });

            // Schedule maintenance button
            document.getElementById('schedule-maintenance-btn').addEventListener('click', () => {
                document.getElementById('schedule-maintenance-modal').classList.remove('hidden');
                populateAssetDropdown();
            });

            // Close schedule modal
            document.getElementById('close-schedule-modal').addEventListener('click', () => {
                document.getElementById('schedule-maintenance-modal').classList.add('hidden');
            });

            document.getElementById('cancel-schedule').addEventListener('click', () => {
                document.getElementById('schedule-maintenance-modal').classList.add('hidden');
            });

            // Maintenance filter buttons
            document.querySelectorAll('.maintenance-filter-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // Update button states
                    document.querySelectorAll('.maintenance-filter-btn').forEach(b => {
                        b.classList.remove('bg-coresite-blue', 'text-white');
                        b.classList.add('bg-coresite-panel', 'text-gray-300');
                    });
                    btn.classList.remove('bg-coresite-panel', 'text-gray-300');
                    btn.classList.add('bg-coresite-blue', 'text-white');

                    // Filter maintenance
                    populateMaintenanceTable(btn.dataset.status);
                });
            });

            // Schedule maintenance form submit
            document.getElementById('schedule-maintenance-form').addEventListener('submit', (e) => {
                e.preventDefault();
                
                const assetSelect = document.getElementById('asset-select');
                const maintenanceType = document.getElementById('maintenance-type');
                const prioritySelect = document.getElementById('priority-select');
                const scheduledDate = document.getElementById('scheduled-date');
                const technician = document.getElementById('technician-select');
                const description = document.getElementById('maintenance-description');

                if (!assetSelect.value || !scheduledDate.value) {
                    showNotification('Please fill in all required fields', 'error');
                    return;
                }

                // Get asset details
                const selectedAsset = Object.values(assets).flat().find(a => a.id === assetSelect.value);
                if (!selectedAsset) return;

                // Generate work order
                const workOrderNumber = `WO${Math.floor(Math.random() * 90000) + 10000}`;

                // Add to maintenance data
                const newMaintenance = {
                    id: workOrderNumber,
                    assetId: selectedAsset.id,
                    assetName: selectedAsset.name,
                    facility: 'LA1 - T-Mobile Los Angeles',
                    type: maintenanceType.value.charAt(0).toUpperCase() + maintenanceType.value.slice(1),
                    priority: prioritySelect.value.charAt(0).toUpperCase() + prioritySelect.value.slice(1),
                    scheduledDate: new Date(scheduledDate.value),
                    status: 'Scheduled',
                    technician: technician.options[technician.selectedIndex].text.split(' (')[0],
                    description: description.value || 'Scheduled maintenance task',
                    category: assetSelect.options[assetSelect.selectedIndex].dataset.category
                };

                maintenanceData.unshift(newMaintenance);

                // Close modal and refresh table
                document.getElementById('schedule-maintenance-modal').classList.add('hidden');
                populateMaintenanceTable();

                // Reset form
                document.getElementById('schedule-maintenance-form').reset();

                showNotification(`Maintenance ${workOrderNumber} scheduled successfully!`, 'success');
            });
        });
    </script>
</body>
</html>
